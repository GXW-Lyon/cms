webpackJsonp([15],{"6JkS":function(t,o,r){"use strict";var e=function(){var t=this,o=t.$createElement,r=t._self._c||o;return r("div",[r("div",{staticClass:"page_create"},[t._m(0),t._v(" "),r("div",{staticClass:"page_d_con"},[r("div",{staticClass:"page_d_con_left page_d_con_left_widthAll"},[r("el-form",{ref:"form",attrs:{model:t.profrom,"label-width":"125px"}},[r("el-form-item",{staticStyle:{height:"auto"},attrs:{label:"产品名称："}},[r("el-select",{directives:[{name:"show",rawName:"v-show",value:0==t.profrom.proStatus,expression:"profrom.proStatus==0"}],staticClass:"f_select1",attrs:{placeholder:"请选择",filterable:""},on:{change:t.selectProduct},model:{value:t.profrom.productID,callback:function(o){t.$set(t.profrom,"productID",o)},expression:"profrom.productID"}},t._l(t.options.product,function(t,o){return r("el-option",{key:t.id,attrs:{label:t.val,value:t.id}})})),t._v(" "),r("el-input",{directives:[{name:"show",rawName:"v-show",value:1==t.profrom.proStatus,expression:"profrom.proStatus==1"}],staticClass:"f_input2",model:{value:t.profrom.productName,callback:function(o){t.$set(t.profrom,"productName",o)},expression:"profrom.productName"}}),t._v(" "),r("el-radio-group",{staticClass:"f_radio3 f_radio",model:{value:t.profrom.proStatus,callback:function(o){t.$set(t.profrom,"proStatus",o)},expression:"profrom.proStatus"}},[r("el-radio",{attrs:{label:1}},[t._v("新建产品")]),t._v(" "),r("el-radio",{attrs:{label:0}},[t._v("选择已有产品")])],1)],1),t._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==t.profrom.proStatus,expression:"profrom.proStatus==0"}],staticStyle:{height:"auto"},attrs:{label:"产品包："}},[r("el-select",{directives:[{name:"show",rawName:"v-show",value:0!=t.profrom.proApkStatus,expression:"profrom.proApkStatus!=0"}],staticClass:"f_select1",attrs:{placeholder:"请选择","value-key":"val"},model:{value:t.profrom.proApk,callback:function(o){t.$set(t.profrom,"proApk",o)},expression:"profrom.proApk"}},t._l(t.options.productApks,function(t,o){return r("el-option",{key:o,attrs:{label:t.key,value:t}})})),t._v(" "),r("el-radio-group",{staticClass:"f_radio3 f_radio",model:{value:t.profrom.proApkStatus,callback:function(o){t.$set(t.profrom,"proApkStatus",o)},expression:"profrom.proApkStatus"}},[r("el-radio",{attrs:{label:0}},[t._v("新建")]),t._v(" "),r("el-radio",{attrs:{label:1}},[t._v("编辑")]),t._v(" "),r("el-radio",{attrs:{label:2}},[t._v("删除")])],1)],1),t._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.profrom.proApkStatus&&0==t.profrom.proStatus,expression:"profrom.proApkStatus==1&&profrom.proStatus==0"}],attrs:{label:"包名："}},[r("el-input",{staticClass:"f_input2",model:{value:t.profrom.proApk.key,callback:function(o){t.$set(t.profrom.proApk,"key",o)},expression:"profrom.proApk.key"}})],1),t._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.profrom.proApkStatus&&0==t.profrom.proStatus,expression:"profrom.proApkStatus==1&&profrom.proStatus==0"}],attrs:{label:"包链接："}},[r("el-input",{staticClass:"f_input2",model:{value:t.profrom.proApk.val,callback:function(o){t.$set(t.profrom.proApk,"val",o)},expression:"profrom.proApk.val"}})],1),t._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==t.profrom.proApkStatus||1==t.profrom.proStatus,expression:"profrom.proApkStatus==0||profrom.proStatus==1"}],staticStyle:{height:"auto!important"},attrs:{label:"添加包："}},[r("el-input",{staticClass:"f_textarea",staticStyle:{width:"85%!important"},attrs:{type:"textarea",placeholder:"包名@#@包链接 的形式录入，多个请回车"},model:{value:t.profrom.notes,callback:function(o){t.$set(t.profrom,"notes",o)},expression:"profrom.notes"}})],1),t._v(" "),r("el-form-item",{staticClass:"form_button"},[r("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确认")]),t._v(" "),r("el-button",{on:{click:function(o){t.go_back()}}},[t._v("返回")])],1)],1)],1)])])])},a=[function(){var t=this,o=t.$createElement,r=t._self._c||o;return r("div",{staticClass:"page_d_title"},[r("i"),r("span",[t._v("产品管理")])])}],s={render:e,staticRenderFns:a};o.a=s},C02E:function(t,o,r){o=t.exports=r("UTlt")(!0),o.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"index.vue",sourceRoot:""}])},cUo1:function(t,o,r){"use strict";o.a={data:function(){return{profrom:{proStatus:0,proApkStatus:1,productID:"",productName:"",proApk:"",notes:""},options:{productApks:[],product:[{id:"",val:""}],butText:[{id:"打开",val:"打开"},{id:"下载",val:"下载"}]},domain:""}},created:function(){this.pageInfo()},methods:{pageInfo:function(){var t=this;this.$http({method:"get",url:this.apiUrl.getListUrl,params:{type:"3"}}).then(function(o){var r=o.data;1==r.status?t.options.product=r.list:console.log(r.msg)}).catch(function(t){console.log(t)})},selectProduct:function(){var t=this;this.$http({method:"get",url:this.apiUrl.productAttriUrl,params:{id:this.profrom.productID}}).then(function(o){200==o.status&&(t.domain=o.data.domain,t.options.productApks=o.data.apks,t.profrom.proApk.key=t.profrom.proApk.val="")}).catch(function(t){console.log(t)})},apkFormat:function(t){var o=t.split("\n"),r=[];for(var e in o){var a=o[e].split("@#@");r.push({key:a[0],val:a[1]})}return r},onSubmit:function(){var t=this,o={productAttrJSON:{}};if(0==this.profrom.proStatus&&""!=this.profrom.productID)o.id=this.profrom.productID,o.productAttrJSON.domain=this.domain,o.productAttrJSON.apks=this.options.productApks,0==this.profrom.proApkStatus?""!=this.profrom.notes&&o.productAttrJSON.apks.push.apply(o.productAttrJSON.apks,this.apkFormat(this.profrom.notes)):2==this.profrom.proApkStatus&&o.productAttrJSON.apks.forEach(function(r,e){t.profrom.proApk==r&&o.productAttrJSON.apks.splice(e,1)});else{if(1!=this.profrom.proStatus||""==this.profrom.productName)return this.$message({type:"info",message:"产品不能为空"}),!1;o.id=0,o.name=this.profrom.productName,o.productAttrJSON.apks=this.apkFormat(this.profrom.notes)}this.$http({method:"post",url:this.apiUrl.productAttriUrl,data:o}).then(function(o){if(200==o.status){t.$message({type:"success",message:"操作成功"});var r=o.data;t.pageInfo(),t.profrom.productID=r.id,t.selectProduct(),t.profrom.proStatus=0,t.profrom.proApkStatus=1,t.profrom.notes=t.profrom.proApk=""}else t.$message({type:"error",message:"操作失败"})}).catch(function(o){t.$message({type:"error",message:"操作失败"})})},go_back:function(){this.$router.back()}}}},ckZc:function(t,o,r){var e=r("C02E");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);r("FIqI")("2f02bd5d",e,!0,{})},i80d:function(t,o,r){"use strict";function e(t){r("ckZc")}Object.defineProperty(o,"__esModule",{value:!0});var a=r("cUo1"),s=r("6JkS"),p=r("vSla"),i=e,l=p(a.a,s.a,!1,i,null,null);o.default=l.exports}});
//# sourceMappingURL=15.348c33243b62adbbcac8.js.map