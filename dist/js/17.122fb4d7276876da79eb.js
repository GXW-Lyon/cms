webpackJsonp([17],{JXm8:function(t,e,a){"use strict";e.a={data:function(){return{landpageId:"",langPagePreviewUrl:[],unlangPagePreviewUrl:[],platformName:"",edit_from:{platform:"",templateID:"",landPageUrl:"",dynamicUrl:"",pname:"",title:"",apk:{key:"",val:""},autoDownload:{status:0,areaList:[1,2],times:3e3},openWindown:{status:0,ct:""},areaLimit:{status:0,areaList:[3,4],templateID:""},bannerSettings:{position:2,logo:"",slogan:"",bntCt:"打开"},picUrls:[],evadePicUrls:[],lahuo:{flag:!1,url:""},returnBtn:{flag:!1,url:""},creater:"creater",createrDate:"createrDate",lastModifier:"lastModifier",lastModifyDT:"lastModifyDT",productID:""},saveAlt:{status:!1,date:""},options:{area:[{id:"",val:""}],butText:[{id:"打开",val:"打开"},{id:"下载",val:"下载"}],langPage:[],productApks:[{key:"",val:""}]},logo_visible:!0,search_text:"",search_text_shield:"",designerID:"",domain:"",packApkUrl:"",isFirstEnter:!1}},created:function(){this.landpageId=parseInt(this.$route.query.landpageId),this.pageInfo()},methods:{pageInfo:function(){var t=this;this.$http({method:"get",url:this.apiUrl.landpageGetUrl,params:{id:this.landpageId}}).then(function(e){if(200==e.status){switch(t.edit_from=e.data,t.edit_from.platform){case 0:t.platformName="wifi";break;case 1:t.platformName="猎豹";break;case 2:t.platformName="趣头条";break;case 3:t.platformName="铁血军事"}t.edit_from.picUrls=t.picSort(t.edit_from.picUrls,"@#@"),0==t.edit_from.evadePicUrls.length?t.edit_from.evadePicUrls=t.edit_from.picUrls:t.edit_from.evadePicUrls=t.picSort(t.edit_from.evadePicUrls,"@#@"),""==t.edit_from.title&&(t.edit_from.title="福利小视频"),t.packApkUrl=e.data.apk.key,t.packUrlInfo()}}).catch(function(t){console.log(t)}),this.$http({method:"get",url:this.apiUrl.getListUrl,params:{type:"4"}}).then(function(e){var a=e.data;1==a.status?t.options.area=a.list:console.log(a.msg)}).catch(function(t){console.log(t)})},packUrlInfo:function(){var t=this;this.$http({method:"get",url:this.apiUrl.productAttriUrl,params:{id:this.edit_from.productID}}).then(function(e){console.log(e),200==e.status&&(t.domain=e.data.domain,t.options.productApks=e.data.apks)}).catch(function(t){console.log(t)})},handleRemove:function(t,e){this.edit_from.bannerSettings.logo="",document.querySelector(".el-upload--picture-card").classList.remove("none")},logoImgSuccess:function(t,e,a){this.logo_visible=!1,this.edit_from.bannerSettings.logo=t.url,document.querySelector(".el-upload--picture-card").classList.add("none")},uploadError:function(t,e,a){this.$message({type:"error",message:"上传失败，请重试"})},beforeAvatarUpload:function(t){var e=t.name.split("."),a=e.length-1,s="jpg"===e[a],i="png"===e[a],l=t.size/1024/1024<1;return s||i||this.$message({type:"info",message:"上传logo只能是 jpg、png 格式"}),l||this.$message({type:"info",message:"logo大小不能超过 1MB"}),s||i&&l},onSubmit:function(){var t=this;if(this.edit_from.lahuo.flag){if(this.edit_from.lahuo.flag&&!this.edit_from.lahuo.url)return this.$message({type:"info",message:"请输入scheme链接"}),!1}else this.edit_from.lahuo.url="";if(this.edit_from.returnBtn.flag){if(this.edit_from.returnBtn.flag&&!this.edit_from.returnBtn.url)return this.$message({type:"info",message:"请输入返回链接"}),!1}else this.edit_from.returnBtn.url="";this.$http({method:"post",url:this.apiUrl.landpageUpdateUrl,data:{onlyUpdateTemplateId:!1,id:this.landpageId,templateID:this.edit_from.templateID,autoDownload:this.edit_from.autoDownload,openWindown:this.edit_from.openWindown,areaLimit:this.edit_from.areaLimit,bannerSettings:this.edit_from.bannerSettings,lastEditerId:sessionStorage.userId,designerID:this.designerID,apk:this.edit_from.apk,domain:this.domain[0],title:this.edit_from.title,platform:this.edit_from.platform,lahuo:this.edit_from.lahuo,returnBtn:this.edit_from.returnBtn}}).then(function(e){var a=e.data;1==a.status?(t.saveAlt.status=!0,t.saveAlt.date=(new Date).toLocaleString()):t.$message({type:"error",message:a.msg})}).catch(function(t){console.log(t)})},page_search:function(t){var e=this,a=this.search_text;"shield"==t&&(a=this.search_text_shield),this.$http({method:"get",url:this.apiUrl.templateGetUrl,params:{name:a}}).then(function(a){if(200==a.status){var s=a.data;"shield"==t?(e.edit_from.areaLimit.templateID=s.id,e.unlangPagePreviewUrl=e.picSort(s.picUrls,"@#@")):(e.edit_from.templateID=s.id,e.langPagePreviewUrl=e.picSort(s.picUrls,"@#@")),e.designerID=s.designerID}else e.$message({type:"error",message:"该模板不存在"})}).catch(function(t){e.$message({type:"error",message:"该模板不存在"})})},deleteLangPage:function(){var t=this;this.$confirm("此操作将永久删除该落地页, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http({method:"delete",url:t.apiUrl.landpageDelUrl,params:{id:t.landpageId}}).then(function(e){1==e.data.status?(t.$message({type:"success",message:"删除成功"}),t.$router.push({path:"pageList"})):t.$message({type:"error",message:"删除失败"})}).catch(function(e){t.$message({type:"error",message:"删除失败"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},packSelect:function(t){var e=this;this.options.productApks.forEach(function(a,s){a.key==t&&(e.edit_from.apk={key:a.key,val:a.val})})},clearCDN:function(){var t=this;this.$http({method:"get",url:this.apiUrl.landpageRefreshUrl,params:{id:this.landpageId}}).then(function(e){1==e.data.status?t.$message({type:"success",message:"清除成功"}):t.$message({type:"error",message:"清除失败"})}).catch(function(t){console.log(t)})},go_back:function(){this.$router.back()}}}},MZFw:function(t,e,a){var s=a("ROMw");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("FIqI")("85aa22c6",s,!0,{})},ROMw:function(t,e,a){e=t.exports=a("UTlt")(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"listEdit.vue",sourceRoot:""}])},Tbv8:function(t,e,a){"use strict";function s(t){a("MZFw")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("JXm8"),l=a("Zgov"),r=a("vSla"),o=s,n=r(i.a,l.a,!1,o,null,null);e.default=n.exports},Zgov:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"page_detail"},[t._m(0),t._v(" "),a("div",{staticClass:"page_d_con"},[a("div",{staticClass:"page_d_con_left"},[a("el-form",{ref:"form",attrs:{model:t.edit_from,"label-width":"125px"}},[a("el-form-item",{attrs:{label:"投放平台："}},[a("el-input",{staticClass:"f_input1",attrs:{disabled:!0},model:{value:t.platformName,callback:function(e){t.platformName=e},expression:"platformName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"落地页动态链接："}},[a("el-input",{staticClass:"f_input1",attrs:{disabled:!0},model:{value:t.edit_from.dynamicUrl,callback:function(e){t.$set(t.edit_from,"dynamicUrl",e)},expression:"edit_from.dynamicUrl"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"产品名称："}},[a("el-input",{staticClass:"f_input2",attrs:{disabled:!0},model:{value:t.edit_from.pname,callback:function(e){t.$set(t.edit_from,"pname",e)},expression:"edit_from.pname"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"落地页标题："}},[a("el-input",{staticClass:"f_input2",model:{value:t.edit_from.title,callback:function(e){t.$set(t.edit_from,"title",e)},expression:"edit_from.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"产品包号："}},[a("el-select",{staticClass:"f_select1",attrs:{placeholder:"请选择"},on:{change:function(e){t.packSelect(e)}},model:{value:t.packApkUrl,callback:function(e){t.packApkUrl=e},expression:"packApkUrl"}},t._l(t.options.productApks,function(t,e){return a("el-option",{key:e,attrs:{label:t.key,value:t.key}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"当前apk链接："}},[a("el-input",{staticClass:"f_input3",attrs:{disabled:!0},model:{value:t.edit_from.apk.val,callback:function(e){t.$set(t.edit_from.apk,"val",e)},expression:"edit_from.apk.val"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否拉活："}},[a("el-radio-group",{staticClass:"f_radio3 f_radio",model:{value:t.edit_from.lahuo.flag,callback:function(e){t.$set(t.edit_from.lahuo,"flag",e)},expression:"edit_from.lahuo.flag"}},[a("el-radio",{attrs:{label:!0}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:!1}},[t._v("否")])],1)],1),t._v(" "),t.edit_from.lahuo.flag?a("el-form-item",{attrs:{label:"拉活链接："}},[a("el-input",{staticClass:"f_input3",attrs:{placeholder:"请输入Scheme链接"},model:{value:t.edit_from.lahuo.url,callback:function(e){t.$set(t.edit_from.lahuo,"url",e)},expression:"edit_from.lahuo.url"}})],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"是否返回："}},[a("el-radio-group",{staticClass:"f_radio3 f_radio",model:{value:t.edit_from.returnBtn.flag,callback:function(e){t.$set(t.edit_from.returnBtn,"flag",e)},expression:"edit_from.returnBtn.flag"}},[a("el-radio",{attrs:{label:!0}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:!1}},[t._v("否")])],1)],1),t._v(" "),t.edit_from.returnBtn.flag?a("el-form-item",{attrs:{label:"返回链接："}},[a("el-input",{staticClass:"f_input3",attrs:{placeholder:"请输入返回链接"},model:{value:t.edit_from.returnBtn.url,callback:function(e){t.$set(t.edit_from.returnBtn,"url",e)},expression:"edit_from.returnBtn.url"}})],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"地域规避："}},[a("el-radio-group",{staticClass:"f_radio3 f_radio",model:{value:t.edit_from.areaLimit.status,callback:function(e){t.$set(t.edit_from.areaLimit,"status",e)},expression:"edit_from.areaLimit.status"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("否")]),t._v(" "),t._e()],1)],1),t._v(" "),a("el-form-item",{staticStyle:{height:"auto"},attrs:{label:"自动下载："}},[a("el-radio-group",{staticClass:"f_radio1",model:{value:t.edit_from.autoDownload.status,callback:function(e){t.$set(t.edit_from.autoDownload,"status",e)},expression:"edit_from.autoDownload.status"}},[a("el-radio",{attrs:{label:0}},[t._v("不开启")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("全国")]),t._v(" "),a("el-radio",{class:{none:"0"==t.edit_from.areaLimit.status},attrs:{label:2}},[t._v("规避下载\n                                ")])],1),t._v(" "),a("el-select",{staticClass:"f_select2",class:{none:"0"==t.edit_from.autoDownload.status},attrs:{placeholder:"3000"},model:{value:t.edit_from.autoDownload.times,callback:function(e){t.$set(t.edit_from.autoDownload,"times",e)},expression:"edit_from.autoDownload.times"}},[a("el-option",{attrs:{label:0,value:"0"}}),t._v(" "),a("el-option",{attrs:{label:1e3,value:"1000"}}),t._v(" "),a("el-option",{attrs:{label:2e3,value:"2000"}}),t._v(" "),a("el-option",{attrs:{label:3e3,value:"3000"}}),t._v(" "),a("el-option",{attrs:{label:4e3,value:"4000"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"点击弹窗："}},[a("el-radio-group",{staticClass:"f_radio2 f_radio",model:{value:t.edit_from.openWindown.status,callback:function(e){t.$set(t.edit_from.openWindown,"status",e)},expression:"edit_from.openWindown.status"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("否")]),t._v(" "),a("el-input",{class:{none:"0"==t.edit_from.openWindown.status},attrs:{placeholder:"自定义弹窗内容"},model:{value:t.edit_from.openWindown.ct,callback:function(e){t.$set(t.edit_from.openWindown,"ct",e)},expression:"edit_from.openWindown.ct"}})],1)],1),t._v(" "),a("div",{staticClass:"banner_part_line"},[t._v("悬浮banner设置")]),t._v(" "),a("el-form-item",{attrs:{label:"位置："}},[a("el-radio-group",{model:{value:t.edit_from.bannerSettings.position,callback:function(e){t.$set(t.edit_from.bannerSettings,"position",e)},expression:"edit_from.bannerSettings.position"}},[a("el-radio",{attrs:{label:1}},[t._v("顶部")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("底部")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("不显示")])],1)],1),t._v(" "),0!=t.edit_from.bannerSettings.position?a("el-form-item",{staticStyle:{height:"auto"},attrs:{label:"logo："}},[a("div",{staticClass:"new_logo",class:{none:!t.logo_visible}},[a("img",{attrs:{src:t.edit_from.bannerSettings.logo}})]),t._v(" "),a("el-upload",{attrs:{action:t.apiUrl.tuiaUploadImgUrl,"with-credentials":!0,"list-type":"picture-card","on-remove":t.handleRemove,beforeUpload:t.beforeAvatarUpload,onError:t.uploadError,"on-success":t.logoImgSuccess}},[a("i",{staticClass:"el-icon-plus"})])],1):t._e(),t._v(" "),0!=t.edit_from.bannerSettings.position?a("el-form-item",{attrs:{label:"slogan："}},[a("el-input",{staticClass:"f_input4",model:{value:t.edit_from.bannerSettings.slogan,callback:function(e){t.$set(t.edit_from.bannerSettings,"slogan",e)},expression:"edit_from.bannerSettings.slogan"}})],1):t._e(),t._v(" "),0!=t.edit_from.bannerSettings.position?a("el-form-item",{attrs:{label:"按钮文字："}},[a("el-select",{staticClass:"f_select4",attrs:{filterable:"","allow-create":"",placeholder:"请选择"},model:{value:t.edit_from.bannerSettings.bntCt,callback:function(e){t.$set(t.edit_from.bannerSettings,"bntCt",e)},expression:"edit_from.bannerSettings.bntCt"}},t._l(t.options.butText,function(t){return a("el-option",{key:t.id,attrs:{label:t.val,value:t.id}})}))],1):t._e(),t._v(" "),a("el-form-item",{staticClass:"form_button"},[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确认")]),t._v(" "),a("el-button",{on:{click:function(e){t.go_back()}}},[t._v("返回")])],1)],1)],1),t._v(" "),a("div",{staticClass:"page_d_con_right"},[a("div",{staticClass:"page_d_current"},[a("div",{staticClass:"current_page_title"},[t._v("当前落地页预览")]),t._v(" "),a("div",{staticClass:"none_ceng"}),t._v(" "),a("div",{staticClass:"current_img"},t._l(t.edit_from.picUrls,function(t,e){return a("img",{attrs:{src:t.replace(/^\d+@#@/g,"")}})}))]),t._v(" "),a("div",{staticClass:"page_d_preview"},[a("div",{staticClass:"preview_page_title"},[t._v("模板预览")]),t._v(" "),a("div",{staticClass:"page_d_right_search"},[a("el-input",{staticClass:"page_d_select",attrs:{placeholder:"请输入模板名称"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.page_search(e):null}},model:{value:t.search_text,callback:function(e){t.search_text=e},expression:"search_text"}}),a("el-button",{staticClass:"page_d_s_button",on:{click:t.page_search}},[t._v("搜索")])],1),t._v(" "),a("div",{staticClass:"preview_img"},t._l(t.langPagePreviewUrl,function(t,e){return a("img",{attrs:{src:t.replace(/^\d+@#@/g,"")}})}))]),t._v(" "),a("div",{staticClass:"page_d_alt",class:{none:!t.saveAlt.status}},[t._v("\n                        提示：保存已生效，生效时间："),a("span",[t._v(t._s(t.saveAlt.date))])]),t._v(" "),a("div",{staticClass:"page_d_msg"},[a("ul",[a("li",[t._v("创建人：")]),t._v(" "),a("li",[t._v(t._s(t.edit_from.creater))]),t._v(" "),a("li",[t._v("日期：")]),t._v(" "),a("li",[t._v(t._s(t.edit_from.createrDate))]),t._v(" "),a("li",[t._v("最后编辑人：")]),t._v(" "),a("li",[t._v(t._s(t.edit_from.lastModifier))]),t._v(" "),a("li",[t._v("日期：")]),t._v(" "),a("li",[t._v(t._s(t.edit_from.lastModifyDT))])])]),t._v(" "),a("p",{staticClass:"edit refresh"},[a("button",{staticClass:"el-button button el-button--primary",attrs:{type:"button"},on:{click:t.clearCDN}},[a("span",[t._v("清除缓存")])])]),t._v(" "),a("p",{staticClass:"edit delete"},[a("button",{staticClass:"el-button button el-button--primary",attrs:{type:"button"},on:{click:t.deleteLangPage}},[a("span",[t._v("删除")])])])]),t._v(" "),1==t.edit_from.areaLimit.status?a("div",{staticClass:"page_d_con_right shieldConfig"},[a("div",{staticClass:"page_d_current"},[a("div",{staticClass:"current_page_title"},[t._v("当前落地页预览")]),t._v(" "),a("div",{staticClass:"none_ceng"},[t._v("屏蔽地区预览")]),t._v(" "),a("div",{staticClass:"current_img"},t._l(t.edit_from.picUrls,function(t,e){return a("img",{attrs:{src:t.replace(/^\d+@#@/g,"")}})})),t._v(" "),a("div",{staticClass:"none_ceng"},[t._v("非屏蔽地区预览")]),t._v(" "),a("div",{staticClass:"current_img"},t._l(t.edit_from.evadePicUrls,function(t,e){return a("img",{attrs:{src:t.replace(/^\d+@#@/g,"")}})}))]),t._v(" "),a("div",{staticClass:"page_d_preview"},[a("div",{staticClass:"preview_page_title"},[t._v("模板预览")]),t._v(" "),a("div",{staticClass:"page_d_right_search"},[a("el-input",{staticClass:"page_d_select",attrs:{placeholder:"请输入屏蔽地区模板名称"},model:{value:t.search_text,callback:function(e){t.search_text=e},expression:"search_text"}}),a("el-button",{staticClass:"page_d_s_button",on:{click:t.page_search}},[t._v("搜索")])],1),t._v(" "),a("div",{staticClass:"preview_img"},t._l(t.langPagePreviewUrl,function(t,e){return a("img",{attrs:{src:t.replace(/^\d+@#@/g,"")}})})),t._v(" "),a("div",{staticClass:"page_d_right_search"},[a("el-input",{staticClass:"page_d_select",attrs:{placeholder:"请输入非屏蔽地区模板名称"},model:{value:t.search_text_shield,callback:function(e){t.search_text_shield=e},expression:"search_text_shield"}}),a("el-button",{staticClass:"page_d_s_button",on:{click:function(e){t.page_search("shield")}}},[t._v("搜索")])],1),t._v(" "),a("div",{staticClass:"preview_img"},t._l(t.unlangPagePreviewUrl,function(t,e){return a("img",{attrs:{src:t.replace(/^\d+@#@/g,"")}})}))]),t._v(" "),a("div",{staticClass:"page_d_alt",class:{none:!t.saveAlt.status}},[t._v("\n                        提示：保存已生效，生效时间："),a("span",[t._v(t._s(t.saveAlt.date))])]),t._v(" "),a("div",{staticClass:"page_d_msg"},[a("ul",[a("li",[t._v("创建人：")]),t._v(" "),a("li",[t._v(t._s(t.edit_from.creater))]),t._v(" "),a("li",[t._v("日期：")]),t._v(" "),a("li",[t._v(t._s(t.edit_from.createrDate))]),t._v(" "),a("li",[t._v("最后编辑人：")]),t._v(" "),a("li",[t._v(t._s(t.edit_from.lastModifier))]),t._v(" "),a("li",[t._v("日期：")]),t._v(" "),a("li",[t._v(t._s(t.edit_from.lastModifyDT))])])]),t._v(" "),a("p",{staticClass:"edit refresh"},[a("button",{staticClass:"el-button button el-button--primary",attrs:{type:"button"},on:{click:t.clearCDN}},[a("span",[t._v("清除缓存")])])]),t._v(" "),a("p",{staticClass:"edit delete"},[a("button",{staticClass:"el-button button el-button--primary",attrs:{type:"button"},on:{click:t.deleteLangPage}},[a("span",[t._v("删除")])])])]):t._e()])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_d_title"},[a("i"),a("span",[t._v("落地页详情设置")])])}],l={render:s,staticRenderFns:i};e.a=l}});
//# sourceMappingURL=17.122fb4d7276876da79eb.js.map