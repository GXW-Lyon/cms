webpackJsonp([7],{"C/rx":function(t,e,a){"use strict";function l(t){a("OzmC")}Object.defineProperty(e,"__esModule",{value:!0});var s=a("hj8z"),i=a("Szfc"),r=a("vSla"),n=l,o=r(s.a,i.a,!1,n,null,null);e.default=o.exports},OzmC:function(t,e,a){var l=a("bQCu");"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);a("FIqI")("6977b514",l,!0,{})},Szfc:function(t,e,a){"use strict";var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"page_create"},[a("div",{staticClass:"menuNav"},[a("p",[a("i",{staticClass:"nav_index"}),t._l(t.menu_nav,function(e,l){return a("span",{key:l},[a("i",{staticClass:"el-icon-arrow-right"}),a("em",[t._v(t._s(e))])])})],2)]),t._v(" "),a("div",{staticClass:"page_d_title"},[a("i"),a("span",[t._v(t._s(t.title))])]),t._v(" "),a("div",{staticClass:"page_d_con"},[a("div",{staticClass:"page_d_con_left",staticStyle:{width:"600px"}},[a("el-form",{ref:"form",attrs:{model:t.template_from,"label-width":"125px"}},[a("el-form-item",{attrs:{label:"选择位置："}},[a("el-select",{staticClass:"f_select1",attrs:{placeholder:"请选择渠道",disabled:t.inpFlag},on:{change:t.weightRatio},model:{value:t.template_from.channel,callback:function(e){t.$set(t.template_from,"channel",e)},expression:"template_from.channel"}},t._l(t.channelList,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"创意名称："}},[a("el-input",{staticClass:"f_input2",attrs:{placeholder:"请输入创意名称",disabled:t.inpFlag},model:{value:t.adName,callback:function(e){t.adName=e},expression:"adName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"素材样式："}},[a("el-select",{staticClass:"f_select1",attrs:{placeholder:"请选择样式",disabled:t.inpFlag},model:{value:t.template_from.creativeTemplate,callback:function(e){t.$set(t.template_from,"creativeTemplate",e)},expression:"template_from.creativeTemplate"}},t._l(t.creativeTemplateList,function(t){return a("el-option",{key:t.id,attrs:{label:t.val,value:t.id}})}))],1),t._v(" "),a("el-form-item",{staticStyle:{height:"auto"},attrs:{label:"上传广告图片："}},[a("el-upload",{staticClass:"upload-demo",attrs:{data:t.upLoadData,action:t.apiUrl.tuiaUploadImgUrl,"with-credentials":!0,"on-success":t.adImgSuccess,"on-remove":t.handleRemove,beforeUpload:t.beforeAvatarUpload,onError:t.uploadError,"file-list":t.fileList,disabled:t.inpFlag}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("请上传格式为JPG，大小1MB以内的图片")])],1)],1),t._v(" "),1!=t.template_from.creativeTemplate?a("el-form-item",{attrs:{label:"广告文案："}},[a("el-input",{staticClass:"f_input2",attrs:{placeholder:"",disabled:t.inpFlag},model:{value:t.template_from.desc,callback:function(e){t.$set(t.template_from,"desc",e)},expression:"template_from.desc"}})],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"链接地址："}},[a("el-select",{staticClass:"f_select1",attrs:{placeholder:"请选择状态",disabled:t.inpFlag},on:{change:t.linkFlag},model:{value:t.template_from.lpType,callback:function(e){t.$set(t.template_from,"lpType",e)},expression:"template_from.lpType"}},t._l(t.landType,function(t){return a("el-option",{key:t.lpType,attrs:{label:t.val,value:t.lpType}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"链接/包地址："}},[t.apkFlag?a("el-input",{staticClass:"f_input2",attrs:{placeholder:"请输入包链接",disabled:t.inpFlag},model:{value:t.template_from.apkUrl,callback:function(e){t.$set(t.template_from,"apkUrl",e)},expression:"template_from.apkUrl"}}):t._e(),t._v(" "),t.apkFlag?t._e():a("el-input",{staticClass:"f_input2",attrs:{placeholder:"请输入落地页链接",disabled:t.inpFlag},model:{value:t.template_from.landpageUrl,callback:function(e){t.$set(t.template_from,"landpageUrl",e)},expression:"template_from.landpageUrl"}})],1),t._v(" "),4==t.template_from.creativeTemplate?a("el-form-item",{attrs:{label:"触发按键："}},[a("el-select",{staticClass:"f_select1",attrs:{placeholder:"请选择按键",disabled:t.inpFlag,filterable:"","allow-create":""},model:{value:t.template_from.bntDesc,callback:function(e){t.$set(t.template_from,"bntDesc",e)},expression:"template_from.bntDesc"}},t._l(t.bntType,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}))],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"创意权重："}},[a("el-select",{staticClass:"f_select1",attrs:{placeholder:"请选择权重",disabled:t.inpFlag},model:{value:t.template_from.weight,callback:function(e){t.$set(t.template_from,"weight",e)},expression:"template_from.weight"}},t._l(t.channelWeight,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}))],1),t._v(" "),a("el-form-item",{staticClass:"form_button",staticStyle:{"margin-top":"60px"}},[a("el-button",{attrs:{type:"primary",disabled:t.inpFlag},on:{click:t.onSubmit}},[t._v(t._s(t.but_text))]),t._v(" "),a("el-button",{on:{click:function(e){t.go_back()}}},[t._v("返回")])],1)],1)],1),t._v(" "),a("div",{staticClass:"page_d_con_right",staticStyle:{width:"530px"}},[a("div",{staticClass:"page_d_current page_create_current"},[a("div",{staticClass:"current_page_title create_page_title"},[t._v("创意预览")]),t._v(" "),t.isModel?a("div",{staticClass:"current_img",staticStyle:{height:"auto"}},[a("h2",[t._v("广告图片")]),t._v(" "),t._l(t.template_from.imgUrls,function(t,e){return a("img",{key:e,staticClass:"image",attrs:{src:t.replace(/^\d+@#@/g,"")}})})],2):t._e()])])])])])},s=[],i={render:l,staticRenderFns:s};e.a=i},bQCu:function(t,e,a){e=t.exports=a("UTlt")(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"ideaEdit.vue",sourceRoot:""}])},hj8z:function(t,e,a){"use strict";var l=a("rVsN"),s=a.n(l),i=a("HzJ8"),r=a.n(i);e.a={data:function(){return{apkFlag:!0,isTrue:!1,isModel:!1,inpFlag:!1,adFlag:!1,lpFlag:!1,logo_visible:!1,title:"编辑创意",menu_nav:["推啊数据管理","创意管理","编辑创意"],fileList:[],adurl:"",upLoadData:{imgType:1},template_from:{apkUrl:"",bntDesc:"",channel:"",creativeTemplate:"",desc:"",landpageUrl:"",weight:"",lpType:"",lpImgUrls:[],imgUrls:""},adNo:"",adName:"",templateDisable:!1,saveAlt:{status:!1,date:""},channelList:[],creativeTemplateList:[{id:1,val:"单图"},{id:2,val:"左图右文"},{id:3,val:"三图上文"},{id:4,val:"推啊"}],channelWeight:[],bntType:["点击","点击领取"],landType:[{lpType:1,val:"链接落地页地址"},{lpType:2,val:"直接下载（仅支持包地址）"}],but_text:"确认",status:{product:!1,template:!1}}},created:function(){this.adInfo(this.$route.query.id,this.$route.query.status),this.channelInfo()},methods:{adInfo:function(t,e){var a=this;this.$http({method:"get",url:this.apiUrl.tuiaAdminAdGet,params:{adNo:t,status:e}}).then(function(t){if(200==t.status){var e=t.data;a.template_from=e.adAttrJson,a.adName=e.adName;var l=[],s=!0,i=!1,n=void 0;try{for(var o,p=r()(a.template_from.imgUrls);!(s=(o=p.next()).done);s=!0){var m=o.value;l.push({name:a.picSubName(m),url:m})}}catch(t){i=!0,n=t}finally{try{!s&&p.return&&p.return()}finally{if(i)throw n}}a.fileList=l,0===e.adAttrJson.lpType?(a.isModel=!0,a.isTrue=!0,a.lpFlag=!0):a.isModel=!0,1===e.adAttrJson.lpType&&(a.apkFlag=!1)}}).catch()},linkFlag:function(){1===this.template_from.lpType?(this.apkFlag=!1,this.lpFlag=!1,this.isTrue=!1):0===this.template_from.lpType?(this.apkFlag=!0,this.lpFlag=!0,this.isTrue=!0):(this.apkFlag=!0,this.lpFlag=!1,this.isTrue=!1)},channelInfo:function(){var t=this;this.$http({method:"get",url:this.apiUrl.tuiaAdminChannelList}).then(function(e){if(console.log(e),200==e.status){var a=e.data;t.channelList=a}}).catch(function(t){console.log(t)})},weightRatio:function(){var t=this;this.channelWeight=[],this.$http({method:"get",url:this.apiUrl.tuiaAdminChannelWeightRatio,params:{channel:this.template_from.channel}}).then(function(e){var a=e.data.weightRatio;for(var l in a)t.channelWeight.push(l)}).catch(function(t){console.log(t)})},onSubmit:function(t){var e=this;if(0===this.template_from.lpType&&(this.template_from.landpageUrl=""),1===this.template_from.lpType&&(this.template_from.lpImgUrls=[],this.template_from.apkUrl=""),2===this.template_from.lpType&&(this.template_from.lpImgUrls=[],this.template_from.landpageUrl=""),""==this.adName||""==this.template_from.channel||""==this.template_from.weight||4===this.template_from.creativeTemplate&&""==this.template_from.bntDesc||1!=this.template_from.creativeTemplate&&""==this.template_from.desc||""===this.template_from.lpType||1===this.template_from.lpType&&""==this.template_from.landpageUrl||0===this.template_from.lpType&&""==this.template_from.apkUrl||2===this.template_from.lpType&&""==this.template_from.apkUrl||0==this.template_from.imgUrls.length)return this.$message({type:"error",message:"所有信息不能为空，请重新提交"}),!1;this.template_from.imgUrls.length>0&&(this.template_from.imgUrls=this.pic_sort(this.template_from.imgUrls)),this.$http({method:"post",url:this.apiUrl.tuiaAdminAdUpdate,data:{adAttrJson:this.template_from,adName:this.adName,adNo:this.$route.query.id}}).then(function(t){if(200==t.status){1==t.data.status&&(e.inpFlag=!0,e.saveAlt.date=(new Date).toLocaleString(),e.$message({type:"success",message:"编辑成功"}),e.go_back())}else e.$message({type:"error",message:"编辑失败"})}).catch(function(t){console.log(t)})},go_back:function(){this.$router.back()},handleRemove:function(t,e){this.template_from.imgUrls=[];var a=!0,l=!1,s=void 0;try{for(var i,n=r()(e);!(a=(i=n.next()).done);a=!0){var o=i.value;o.response?this.template_from.imgUrls.push(o.response.url):this.template_from.imgUrls.push(o.url)}}catch(t){l=!0,s=t}finally{try{!a&&n.return&&n.return()}finally{if(l)throw s}}0==this.template_from.imgUrls.length&&(this.isModel=!1)},handleRemoveImg:function(t,e){this.template_from.lpImgUrls=[];var a=!0,l=!1,s=void 0;try{for(var i,n=r()(e);!(a=(i=n.next()).done);a=!0){var o=i.value;o.response?this.template_from.lpImgUrls.push(o.response.url):this.template_from.lpImgUrls.push(o.url)}}catch(t){l=!0,s=t}finally{try{!a&&n.return&&n.return()}finally{if(l)throw s}}""==this.template_from.lpImgUrls&&(this.isTrue=!1)},adImgSuccess:function(t,e,a){this.isModel=!0,this.saveAlt.date=(new Date).toLocaleString(),this.template_from.imgUrls.push(t.url)},handleSuccessImg:function(t,e,a){this.isTrue=!0,this.saveAlt.date=(new Date).toLocaleString(),this.template_from.lpImgUrls.push(t.url)},uploadError:function(t,e,a){alert("上传失败，请重试！")},beforeAvatarUpload:function(t){var e=!1;switch(this.template_from.creativeTemplate){case 1:case 2:case 4:if(1==this.template_from.imgUrls.length){this.$message({type:"info",message:"当前素材样式只可上传一张图片"}),e=!0;break}case 3:if(3==this.template_from.imgUrls.length){this.$message({type:"info",message:"当前素材样式最多可上传三张图片"}),e=!0;break}default:if(this.template_from.imgUrls.length>=3){this.$message({type:"info",message:"广告素材最多可上传三张图片"}),e=!0;break}}if(e)return!1;var a=this;return new s.a(function(t,e){var a={};a.size=!0,t(a)}).then(function(e){var l=t.name.split("."),s=l.length-1;return e.extension="jpg"===l[s],e.isLt2M=t.size/1024/1024<1,e.extension||a.$message({type:"info",message:"上传模板只能是 jpg格式"}),e.isLt2M||a.$message({type:"info",message:"上传图片大小不能超过 1MB"}),e}).then(function(t){var e=t.extension;t.size&&t.isLt2M&&e||reject(!1)})},beforeAvatarUploadImg:function(t){var e=t.name.split("."),a=e.length-1,l="jpg"===e[a],s="gif"===e[a],i="png"===e[a],r=t.size/1024/1024<2;return l||s||i||alert("上传模板只能是 jpg格式!"),r||alert("上传图片大小不能超过 2MB!"),l||s||i&&r}}}}});
//# sourceMappingURL=7.a22ffc53a2cb1c4cf551.js.map