webpackJsonp([27],{"0gBq":function(t,e,a){"use strict";var o=a("aA9S"),i=a.n(o),r=a("hRKE"),c=a.n(r);e.a={data:function(){return{isRightBox:!1,isabled:!1,menu_nav:["信息流数据管理","平台合同管理","查看合同"],dateValue:"",contract_from:{beginTime:"",contractNo:"",customerCode:"",platformCode:"",endTime:"",id:"",isOwner:1,kyhdType:"",marketingMode:"XN",productItems:[]},options:{customer:[],kyhd:[{id:"Y1",val:"深圳康远互动科技有限公司"},{id:"Y2",val:"霍尔果斯康远互动网络科技有限公司"},{id:"Y3",val:"上海贝玩网络科技有限公司"},{id:"Y4",val:"深圳自由泰格互动科技有限公司"}],product:[{placeHolder:"请选择",model_value:{},items:[]}]},customerContractId:"",pageTitle:"创建合同信息"}},created:function(){this.customerSelect(),this.customerContractId=this.$route.query.customerContractId,this.titleName=this.$route.query.titleName,""!=this.customerContractId&&"合同修改"==this.titleName?(this.pageInfo(),this.pageTitle="编辑合同信息",this.isRightBox=this.dateStatus=!0):""!=this.customerContractId&&"查看合同"==this.titleName&&(this.pageInfo(),this.isabled=!0,this.pageTitle="合同信息")},methods:{pageInfo:function(){var t=this;this.$http({method:"get",url:this.apiUrl.fdpConGetPlatform,params:{id:this.customerContractId}}).then(function(e){if(200==e.status){var a=e.data;t.contract_from=a,t.dateValue=[new Date(t.contract_from.beginTime),new Date(t.contract_from.endTime)]}}).catch(function(t){console.log(t)})},customerSelect:function(){var t=this;this.$http({method:"get",url:this.apiUrl.fdpPlatGetPlatFormList,params:{offset:1,limit:9999,val:""}}).then(function(e){if(200==e.status){var a=e.data;t.options.customer=a}}).catch(function(t){console.log(t)})},cusSelect:function(){this.proInfo()},proSelect:function(t,e){"object"==(void 0===e?"undefined":c()(e))&&(this.contract_from.productItems[t]||this.contract_from.productItems.push({id:"",productNo:""}),this.contract_from.productItems[t].id=e.productId,this.contract_from.productItems[t].productNo=e.productId),this.checkFrom()},addRow:function(){var t=i()({},this.options.product[0]);this.options.product.push(t)},checkFrom:function(){var t=this.contract_from;if(""!=t.platformCode&&""!=t.kyhdType&&""!=t.beginTime){var e=Math.ceil(this.datedifference(t.beginTime,t.endTime)/365),a=t.beginTime.replace(/-/g,"");1==t.isOwner?this.contract_from.contractNo=t.kyhdType+t.platformCode+"00XN"+a+e:2==this.contract_from.isOwner&&(this.contract_from.contractNo=t.platformCode+t.kyhdType+"00XN"+a+e)}else this.contract_from.contractNo=""},onSubmit:function(){var t=this,e=this.apiUrl.customercContNew;""!=this.customerContractId&&(e=this.apiUrl.customercContUpdate),this.$http({method:"post",url:e,data:this.contract_from}).then(function(e){e.data;200==e.status?(t.$message({type:"success",message:"操作成功"}),t.go_back()):t.$message({type:"error",message:"操作失败，请完善信息，并重新提交"})}).catch(function(e){console.log(e),t.$message({type:"error",message:"请完善信息，并重新提交"})})},go_back:function(){this.$router.back()},dateChange:function(){var t=this.dateValue;t.length>0&&(this.contract_from.beginTime=this.formatDateTime(t[0],"y-m-d"),this.contract_from.endTime=this.formatDateTime(t[1],"y-m-d")),this.checkFrom()}}}},"9map":function(t,e,a){e=t.exports=a("UTlt")(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"platformConEdit.vue",sourceRoot:""}])},"NOs/":function(t,e,a){"use strict";function o(t){a("dv96")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("0gBq"),r=a("i0Jy"),c=a("vSla"),s=o,n=c(i.a,r.a,!1,s,null,null);e.default=n.exports},dv96:function(t,e,a){var o=a("9map");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a("FIqI")("33f326b4",o,!0,{})},i0Jy:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"page_create customerContractNew"},[a("div",{staticClass:"menuNav"},[a("p",[a("i",{staticClass:"nav_index"}),t._l(t.menu_nav,function(e,o){return a("span",{key:o},[a("i",{staticClass:"el-icon-arrow-right"}),a("em",[t._v(t._s(e))])])})],2)]),t._v(" "),a("div",{staticClass:"page_d_title"},[a("i"),a("span",[t._v(t._s(t.pageTitle))])]),t._v(" "),a("div",{staticClass:"page_d_con"},[a("div",{staticClass:"page_d_con_left cpa_page_left",class:{page_d_con_left_widthAll:!t.isRightBox}},[a("div",{staticClass:"banner_part_line page_create_set_line"},[t._v("合同信息")]),t._v(" "),a("el-form",{ref:"form",attrs:{model:t.contract_from,"label-width":"125px"}},[a("el-form-item",{attrs:{label:"平台主体："}},[a("el-select",{staticClass:"f_select1 inlineBlock",attrs:{filterable:"",placeholder:"请选择",disabled:t.isabled},model:{value:t.contract_from.platformCode,callback:function(e){t.$set(t.contract_from,"platformCode",e)},expression:"contract_from.platformCode"}},t._l(t.options.customer,function(t,e){return a("el-option",{key:t.platformCode,attrs:{label:t.platformName,value:t.platformCode}})})),t._v(" "),a("el-radio-group",{staticClass:"f_radio1 inlineBlock",on:{change:t.checkFrom},model:{value:t.contract_from.isOwner,callback:function(e){t.$set(t.contract_from,"isOwner",e)},expression:"contract_from.isOwner"}},[a("el-radio",{attrs:{label:2,disabled:t.isabled}},[t._v("甲方")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"我方主体："}},[a("el-select",{staticClass:"f_select1 inlineBlock",attrs:{placeholder:"请选择",disabled:t.isabled},on:{change:t.checkFrom},model:{value:t.contract_from.kyhdType,callback:function(e){t.$set(t.contract_from,"kyhdType",e)},expression:"contract_from.kyhdType"}},t._l(t.options.kyhd,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.val,value:t.id}})})),t._v(" "),a("el-radio-group",{staticClass:"f_radio1 inlineBlock",on:{change:t.checkFrom},model:{value:t.contract_from.isOwner,callback:function(e){t.$set(t.contract_from,"isOwner",e)},expression:"contract_from.isOwner"}},[a("el-radio",{attrs:{label:1,disabled:t.isabled}},[t._v("甲方")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"合同有效日期："}},[a("el-date-picker",{attrs:{type:"daterange",align:"right",placeholder:"选择日期范围",format:"yyyy/MM/dd","picker-options":t.$store.state.pickerOptions2,disabled:t.isabled},on:{change:t.dateChange},model:{value:t.dateValue,callback:function(e){t.dateValue=e},expression:"dateValue"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"合同编号："}},[a("el-input",{attrs:{placeholder:"请输入合同编号",disabled:""},model:{value:t.contract_from.contractNo,callback:function(e){t.$set(t.contract_from,"contractNo",e)},expression:"contract_from.contractNo"}})],1),t._v(" "),a("el-form-item",{staticClass:"form_button"},[t.isabled?t._e():a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确认")]),t._v(" "),a("el-button",{on:{click:function(e){t.go_back()}}},[t._v("返回")])],1)],1)],1),t._v(" "),t.isRightBox?a("div",{staticClass:"page_d_con_right cpa_page_right"},[a("div",{staticClass:"page_d_current page_create_current"},[a("div",{staticClass:"current_page_title create_page_title"},[t._v("操作历史记录")]),t._v(" "),a("div",{staticClass:"current_img"},t._l(4,function(e){return a("div",{key:e,staticClass:"text item"},[t._v("\n                                "+t._s("列表内容 "+e)+"\n                            ")])}))])]):t._e()])])])},i=[],r={render:o,staticRenderFns:i};e.a=r}});
//# sourceMappingURL=27.3a7aca5800362b722956.js.map