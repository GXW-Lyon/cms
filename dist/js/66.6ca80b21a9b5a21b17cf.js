webpackJsonp([66],{"4NKp":function(e,n,a){n=e.exports=a("UTlt")(!0),n.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"channelInfoNew.vue",sourceRoot:""}])},A2ap:function(e,n,a){"use strict";n.a={data:function(){return{title:"创建渠道信息",menu_nav:["CPA数据管理","渠道信息管理","创建渠道信息"],channelInfo:{account:"",accountAddress:"",address:"",bank:"",bankAccount:"",busNo:"",cardExpired:"",contact:"",email:"",finType:"",id:"",name:"",fullName:"",alias:[{id:1,name:"",delete:!1}],phone:"",property:"",qq:"",taxId:""},options:{property:[{id:"1",val:"公司"},{id:"2",val:"个人"}]}}},created:function(){this.channelInfo.id=parseInt(this.$route.query.channelId),this.channelInfo.id>0&&(this.title="编辑客户信息",this.pageInfo())},methods:{pageInfo:function(){var e=this;this.$http({method:"get",url:this.apiUrl.channelGet,params:{id:this.channelInfo.id}}).then(function(n){200==n.status&&(e.channelInfo=n.data,e.channelInfo.finType=String(e.channelInfo.finType),e.channelInfo.property=String(e.channelInfo.property))}).catch(function(e){console.log(e)})},onSubmit:function(){var e=this,n=this.apiUrl.channelNew;this.channelInfo.id>0&&(n=this.apiUrl.channelUpdate),this.channelInfo.id||1!=this.channelInfo.alias.length||""!=this.channelInfo.alias[0].name||this.$message({type:"info",message:"客户主体不能为空"});var a=!1;if(this.channelInfo.id&&this.channelInfo.alias.forEach(function(n,t){if(console.log(n.delete),!n.delete&&n.name)return!1;t==e.channelInfo.alias.length-1&&(a=!0,e.$message({type:"info",message:"客户主体不能为空"}))}),a)return!1;this.$http({method:"post",url:n,data:this.channelInfo}).then(function(n){if(200==n.status){var a=n.data;2==a.status?e.$message({type:"info",message:a.msg}):(e.$message({type:"success",message:"操作成功"}),e.go_back())}else e.$message({type:"error",message:"操作失败，请完善信息，并重新提交"})}).catch(function(n){console.log(n),e.$message({type:"error",message:"请完善信息，并重新提交"})})},go_back:function(){this.$router.back()},addAlias:function(){var e=this.channelInfo.alias,n=e.length;if(n>0&&""==e[n-1].name&&!e[n-1].delete)return this.$message({type:"info",message:"不可重复添加空字段"}),!1;this.channelInfo.alias.push({id:n+1,name:"",delete:!1})},delAlias:function(e){this.channelInfo.alias.length<=1?this.channelInfo.id?this.channelInfo.alias[e].delete=!0:this.channelInfo.alias=[{id:1,name:"",delete:!1}]:this.channelInfo.id?this.channelInfo.alias[e].delete=!0:(this.channelInfo.alias.splice(e,1),this.channelInfo.alias.forEach(function(e,n){e.id=n+1})),console.log(this.channelInfo.alias)}}}},"D/0D":function(e,n,a){"use strict";var t=function(){var e=this,n=e.$createElement,a=e._self._c||n;return a("div",[a("div",{staticClass:"page_create customerInfoNew channelInfoNew"},[a("div",{staticClass:"menuNav"},[a("p",[a("i",{staticClass:"nav_index"}),e._l(e.menu_nav,function(n,t){return a("span",{key:t},[a("i",{staticClass:"el-icon-arrow-right"}),a("em",[e._v(e._s(n))])])})],2)]),e._v(" "),a("div",{staticClass:"page_d_title"},[a("i"),a("span",[e._v(e._s(e.title))])]),e._v(" "),a("div",{staticClass:"page_d_con"},[a("div",{staticClass:"page_d_con_left"},[a("el-form",{ref:"form",attrs:{model:e.channelInfo,"label-width":"125px"}},[a("div",{staticClass:"banner_part_line page_create_set_line"},[e._v("公司信息")]),e._v(" "),a("el-form-item",{attrs:{label:"渠道简称："}},[a("el-input",{attrs:{placeholder:"请输入客户名称"},model:{value:e.channelInfo.name,callback:function(n){e.$set(e.channelInfo,"name",n)},expression:"channelInfo.name"}})],1),e._v(" "),a("el-form-item",{staticStyle:{height:"auto",position:"relative"},attrs:{label:"渠道主体："}},[e._l(e.channelInfo.alias,function(n,t){return n.delete?e._e():a("el-form-item",{key:n.id},[a("el-input",{attrs:{placeholder:"请输入渠道主体"},model:{value:n.name,callback:function(a){e.$set(n,"name",a)},expression:"item.name"}}),e._v(" "),a("span",{staticClass:"r_span",staticStyle:{"font-size":"16px"},on:{click:function(n){e.delAlias(t)}}},[e._v("删除")])],1)}),e._v(" "),a("div",{staticClass:"addRow"},[a("el-button",{on:{click:e.addAlias}},[e._v("添加一行")])],1)],2),e._v(" "),a("el-form-item",{attrs:{label:"渠道性质："}},[a("el-select",{staticClass:"f_select1",attrs:{filterable:"",placeholder:"请选择"},model:{value:e.channelInfo.property,callback:function(n){e.$set(e.channelInfo,"property",n)},expression:"channelInfo.property"}},e._l(e.options.property,function(e,n){return a("el-option",{key:e.id,attrs:{label:e.val,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"营业执照号："}},[a("el-input",{attrs:{placeholder:"请输入营业执照号"},model:{value:e.channelInfo.busNo,callback:function(n){e.$set(e.channelInfo,"busNo",n)},expression:"channelInfo.busNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"证件有效期："}},[a("el-input",{attrs:{placeholder:"请输入证件有效期：yyyy-mm-dd"},model:{value:e.channelInfo.cardExpired,callback:function(n){e.$set(e.channelInfo,"cardExpired",n)},expression:"channelInfo.cardExpired"}})],1),e._v(" "),a("div",{staticClass:"banner_part_line page_create_set_line"},[e._v("联系方式")]),e._v(" "),a("el-form-item",{attrs:{label:"账号："}},[a("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.channelInfo.account,callback:function(n){e.$set(e.channelInfo,"account",n)},expression:"channelInfo.account"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人："}},[a("el-input",{attrs:{placeholder:"请输入联系人"},model:{value:e.channelInfo.contact,callback:function(n){e.$set(e.channelInfo,"contact",n)},expression:"channelInfo.contact"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码："}},[a("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.channelInfo.phone,callback:function(n){e.$set(e.channelInfo,"phone",n)},expression:"channelInfo.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱："}},[a("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.channelInfo.email,callback:function(n){e.$set(e.channelInfo,"email",n)},expression:"channelInfo.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"QQ："}},[a("el-input",{attrs:{placeholder:"请输入QQ号"},model:{value:e.channelInfo.qq,callback:function(n){e.$set(e.channelInfo,"qq",n)},expression:"channelInfo.qq"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址："}},[a("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请按格式输入地址：省 市 详细地址"},model:{value:e.channelInfo.address,callback:function(n){e.$set(e.channelInfo,"address",n)},expression:"channelInfo.address"}})],1),e._v(" "),a("div",{staticClass:"banner_part_line page_create_set_line"},[e._v("财务信息")]),e._v(" "),a("el-form-item",{attrs:{label:"财务类型："}},[a("el-select",{staticClass:"f_select1",attrs:{filterable:"",placeholder:"请选择"},model:{value:e.channelInfo.finType,callback:function(n){e.$set(e.channelInfo,"finType",n)},expression:"channelInfo.finType"}},e._l(e.options.property,function(e,n){return a("el-option",{key:e.id,attrs:{label:e.val,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"纳税登记号："}},[a("el-input",{attrs:{placeholder:"请输入纳税登记号"},model:{value:e.channelInfo.taxId,callback:function(n){e.$set(e.channelInfo,"taxId",n)},expression:"channelInfo.taxId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"收款银行："}},[a("el-input",{attrs:{placeholder:"请输入收款银行"},model:{value:e.channelInfo.bank,callback:function(n){e.$set(e.channelInfo,"bank",n)},expression:"channelInfo.bank"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开户地址："}},[a("el-input",{attrs:{placeholder:"请输入开户地址"},model:{value:e.channelInfo.accountAddress,callback:function(n){e.$set(e.channelInfo,"accountAddress",n)},expression:"channelInfo.accountAddress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"银行账号："}},[a("el-input",{attrs:{placeholder:"请输入银行账号"},model:{value:e.channelInfo.bankAccount,callback:function(n){e.$set(e.channelInfo,"bankAccount",n)},expression:"channelInfo.bankAccount"}})],1),e._v(" "),a("el-form-item",{staticClass:"form_button"},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确认")]),e._v(" "),a("el-button",{on:{click:function(n){e.go_back()}}},[e._v("返回")])],1)],1)],1)])])])},l=[],s={render:t,staticRenderFns:l};n.a=s},JPlD:function(e,n,a){"use strict";function t(e){a("kls7")}Object.defineProperty(n,"__esModule",{value:!0});var l=a("A2ap"),s=a("D/0D"),o=a("vSla"),c=t,i=o(l.a,s.a,!1,c,null,null);n.default=i.exports},kls7:function(e,n,a){var t=a("4NKp");"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);a("FIqI")("1a764ce7",t,!0,{})}});
//# sourceMappingURL=66.6ca80b21a9b5a21b17cf.js.map