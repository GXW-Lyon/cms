webpackJsonp([53],{"7aHa":function(e,t,s){t=e.exports=s("UTlt")(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"customerInfoNew.vue",sourceRoot:""}])},bMKe:function(e,t,s){var o=s("7aHa");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);s("FIqI")("ad12d43a",o,!0,{})},f7fH:function(e,t,s){"use strict";function o(e){s("bMKe")}Object.defineProperty(t,"__esModule",{value:!0});var a=s("fcfL"),n=s("pOwS"),l=s("vSla"),c=o,i=l(a.a,n.a,!1,c,null,null);t.default=i.exports},fcfL:function(e,t,s){"use strict";t.a={data:function(){return{dateValue:"",title:"创建客户信息",menu_nav:["CPA数据管理","客户信息管理","创建客户信息"],customerInfo:{accountAddress:"",address:"",adminSysAccounts:[{account:"",id:1,pwd:"",url:""}],alias:[{id:1,name:"",delete:!1}],bank:"",bankAccount:"",busNo:"",cardExpired:"",contact:"",email:"",finType:"",id:"",name:"",fullName:"",phone:"",property:"",qq:"",taxId:""},adminSysAccountsIdCount:1,options:{property:[{id:"1",val:"公司"},{id:"2",val:"个人"}]}}},created:function(){this.customerInfo.id=parseInt(this.$route.query.customerId),this.customerInfo.id>0&&(this.title="编辑客户信息",this.pageInfo())},methods:{pageInfo:function(){var e=this;this.$http({method:"get",url:this.apiUrl.customerGet,params:{id:this.customerInfo.id}}).then(function(t){200==t.status&&(e.customerInfo=t.data,e.customerInfo.finType=String(e.customerInfo.finType),e.customerInfo.property=String(e.customerInfo.property),0==e.customerInfo.adminSysAccounts.length&&e.customerInfo.adminSysAccounts.push({account:"",id:1,pwd:"",url:""}))}).catch(function(e){console.log(e)})},onSubmit:function(){var e=this,t=this.apiUrl.customerNew;this.customerInfo.id>0&&(t=this.apiUrl.customerUpdate);var s=this.customerInfo.adminSysAccounts.length;s>1&&""==this.customerInfo.adminSysAccounts[s-1].url&&this.customerInfo.adminSysAccounts.pop(),this.customerInfo.id||1!=this.customerInfo.alias.length||""!=this.customerInfo.alias[0].name||this.$message({type:"info",message:"客户主体不能为空"});var o=!1;if(this.customerInfo.id&&this.customerInfo.alias.forEach(function(t,s){if(console.log(t.delete),!t.delete&&t.name)return!1;s==e.customerInfo.alias.length-1&&(o=!0,e.$message({type:"info",message:"客户主体不能为空"}))}),o)return!1;this.$http({method:"post",url:t,data:this.customerInfo}).then(function(t){if(200==t.status){var s=t.data;2==s.status?e.$message({type:"info",message:s.msg}):(e.$message({type:"success",message:"操作成功"}),e.go_back())}else e.$message({type:"error",message:"操作失败，请完善信息，并重新提交"})}).catch(function(t){console.log(t),e.$message({type:"error",message:"请完善信息，并重新提交"})})},go_back:function(){this.$router.back()},addRow:function(){var e=this.customerInfo.adminSysAccounts,t=e.length;if(""==e[t-1].url)return this.$message({type:"info",message:"后台链接不能为空"}),!1;this.adminSysAccountsIdCount=t+1,this.customerInfo.adminSysAccounts.push({account:"",id:this.adminSysAccountsIdCount,pwd:"",url:""})},addAlias:function(){var e=this.customerInfo.alias,t=e.length;if(t>0&&""==e[t-1].name&&!e[t-1].delete)return this.$message({type:"info",message:"不可重复添加空字段"}),!1;this.customerInfo.alias.push({id:t+1,name:"",delete:!1})},delAlias:function(e){this.customerInfo.alias.length<=1?this.customerInfo.id?this.customerInfo.alias[e].delete=!0:this.customerInfo.alias=[{id:1,name:"",delete:!1}]:this.customerInfo.id?this.customerInfo.alias[e].delete=!0:(this.customerInfo.alias.splice(e,1),this.customerInfo.alias.forEach(function(e,t){e.id=t+1})),console.log(this.customerInfo.alias)},dateChange:function(){this.customerInfo.cardExpired=this.formatDateTime(this.dateValue,"y-m-d")}}}},pOwS:function(e,t,s){"use strict";var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"page_create customerInfoNew"},[s("div",{staticClass:"menuNav"},[s("p",[s("i",{staticClass:"nav_index"}),e._l(e.menu_nav,function(t,o){return s("span",{key:o},[s("i",{staticClass:"el-icon-arrow-right"}),s("em",[e._v(e._s(t))])])})],2)]),e._v(" "),s("div",{staticClass:"page_d_title"},[s("i"),s("span",[e._v(e._s(e.title))])]),e._v(" "),s("div",{staticClass:"page_d_con"},[s("div",{staticClass:"page_d_con_left"},[s("el-form",{ref:"form",attrs:{model:e.customerInfo,"label-width":"125px"}},[s("div",{staticClass:"banner_part_line page_create_set_line"},[e._v("公司信息")]),e._v(" "),s("el-form-item",{attrs:{label:"客户简称："}},[s("el-input",{attrs:{placeholder:"请输入客户简称"},model:{value:e.customerInfo.name,callback:function(t){e.$set(e.customerInfo,"name",t)},expression:"customerInfo.name"}})],1),e._v(" "),s("el-form-item",{staticStyle:{height:"auto",position:"relative"},attrs:{label:"客户主体："}},[e._l(e.customerInfo.alias,function(t,o){return t.delete?e._e():s("el-form-item",{key:t.id},[s("el-input",{attrs:{placeholder:"请输入客户主体"},model:{value:t.name,callback:function(s){e.$set(t,"name",s)},expression:"item.name"}}),e._v(" "),s("span",{staticClass:"r_span",staticStyle:{"font-size":"16px"},on:{click:function(t){e.delAlias(o)}}},[e._v("删除")])],1)}),e._v(" "),s("div",{staticClass:"addRow"},[s("el-button",{on:{click:e.addAlias}},[e._v("添加一行")])],1)],2),e._v(" "),s("el-form-item",{attrs:{label:"客户性质："}},[s("el-select",{staticClass:"f_select1",attrs:{filterable:"",placeholder:"请选择"},model:{value:e.customerInfo.property,callback:function(t){e.$set(e.customerInfo,"property",t)},expression:"customerInfo.property"}},e._l(e.options.property,function(e,t){return s("el-option",{key:e.id,attrs:{label:e.val,value:e.id}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:"营业执照号："}},[s("el-input",{attrs:{placeholder:"请输入营业执照号"},model:{value:e.customerInfo.busNo,callback:function(t){e.$set(e.customerInfo,"busNo",t)},expression:"customerInfo.busNo"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"证件有效期："}},[s("div",{staticClass:"block"},[s("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},on:{change:e.dateChange},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1)]),e._v(" "),s("div",{staticClass:"banner_part_line page_create_set_line"},[e._v("联系方式")]),e._v(" "),s("el-form-item",{attrs:{label:"联系人："}},[s("el-input",{attrs:{placeholder:"请输入联系人"},model:{value:e.customerInfo.contact,callback:function(t){e.$set(e.customerInfo,"contact",t)},expression:"customerInfo.contact"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"手机号码："}},[s("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.customerInfo.phone,callback:function(t){e.$set(e.customerInfo,"phone",t)},expression:"customerInfo.phone"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"邮箱："}},[s("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.customerInfo.email,callback:function(t){e.$set(e.customerInfo,"email",t)},expression:"customerInfo.email"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"QQ："}},[s("el-input",{attrs:{placeholder:"请输入QQ号"},model:{value:e.customerInfo.qq,callback:function(t){e.$set(e.customerInfo,"qq",t)},expression:"customerInfo.qq"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"地址："}},[s("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请按格式输入地址：省 市 详细地址"},model:{value:e.customerInfo.address,callback:function(t){e.$set(e.customerInfo,"address",t)},expression:"customerInfo.address"}})],1),e._v(" "),s("el-form-item",{staticStyle:{height:"auto",position:"relative"},attrs:{label:"后台账号："}},[e._l(e.customerInfo.adminSysAccounts,function(t){return s("el-form-item",{key:t.id},[e._v("\n                            http://\n                            "),s("el-input",{staticClass:"account_number",staticStyle:{position:"absolute","z-index":"-1"},attrs:{placeholder:"请输入后台网址","auto-complete":"off",disabled:""},model:{value:t.url,callback:function(s){e.$set(t,"url",s)},expression:"item.url"}}),e._v(" "),s("el-input",{staticClass:"account_number",staticStyle:{position:"absolute","z-index":"-1"},attrs:{placeholder:"请输入后台账号","auto-complete":"off",disabled:""},model:{value:t.account,callback:function(s){e.$set(t,"account",s)},expression:"item.account"}}),e._v(" "),s("el-input",{staticClass:"account_number",staticStyle:{position:"absolute","z-index":"-1"},attrs:{type:"password",placeholder:"请输入后台密码","auto-complete":"off",disabled:""},model:{value:t.pwd,callback:function(s){e.$set(t,"pwd",s)},expression:"item.pwd"}}),e._v(" "),s("el-input",{staticClass:"account_number",attrs:{placeholder:"请输入后台网址","auto-complete":"off"},model:{value:t.url,callback:function(s){e.$set(t,"url",s)},expression:"item.url"}}),e._v(" "),s("el-input",{staticClass:"account_number",attrs:{placeholder:"请输入后台账号","auto-complete":"off"},model:{value:t.account,callback:function(s){e.$set(t,"account",s)},expression:"item.account"}}),e._v(" "),s("el-input",{staticClass:"account_number",attrs:{type:"password",placeholder:"请输入后台密码","auto-complete":"off"},model:{value:t.pwd,callback:function(s){e.$set(t,"pwd",s)},expression:"item.pwd"}})],1)}),e._v(" "),s("div",{staticClass:"addRow"},[s("el-button",{on:{click:function(t){e.addRow()}}},[e._v("添加一行")])],1)],2),e._v(" "),s("div",{staticClass:"banner_part_line page_create_set_line"},[e._v("财务信息")]),e._v(" "),s("el-form-item",{attrs:{label:"财务类型："}},[s("el-select",{staticClass:"f_select1",attrs:{filterable:"",placeholder:"请选择"},model:{value:e.customerInfo.finType,callback:function(t){e.$set(e.customerInfo,"finType",t)},expression:"customerInfo.finType"}},e._l(e.options.property,function(e,t){return s("el-option",{key:e.id,attrs:{label:e.val,value:e.id}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:"纳税登记号："}},[s("el-input",{attrs:{placeholder:"请输入纳税登记号"},model:{value:e.customerInfo.taxId,callback:function(t){e.$set(e.customerInfo,"taxId",t)},expression:"customerInfo.taxId"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"收款银行："}},[s("el-input",{attrs:{placeholder:"请输入收款银行"},model:{value:e.customerInfo.bank,callback:function(t){e.$set(e.customerInfo,"bank",t)},expression:"customerInfo.bank"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"开户地址："}},[s("el-input",{attrs:{placeholder:"请输入开户地址"},model:{value:e.customerInfo.accountAddress,callback:function(t){e.$set(e.customerInfo,"accountAddress",t)},expression:"customerInfo.accountAddress"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"银行账号："}},[s("el-input",{attrs:{placeholder:"请输入银行账号"},model:{value:e.customerInfo.bankAccount,callback:function(t){e.$set(e.customerInfo,"bankAccount",t)},expression:"customerInfo.bankAccount"}})],1),e._v(" "),s("el-form-item",{staticClass:"form_button"},[s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确认")]),e._v(" "),s("el-button",{on:{click:function(t){e.go_back()}}},[e._v("返回")])],1)],1)],1)])])])},a=[],n={render:o,staticRenderFns:a};t.a=n}});
//# sourceMappingURL=53.7d9d67fc3ef441f140b3.js.map