webpackJsonp([44],{"+LlI":function(t,e,a){var l=a("bOWV");"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);a("FIqI")("700fcaf8",l,!0,{})},BP65:function(t,e,a){"use strict";var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"template_input"},[t._m(0),t._v(" "),a("div",{staticClass:"page_d_con"},[a("div",{staticClass:"page_d_con_left"},[a("el-form",{ref:"form",attrs:{model:t.template_from,"label-width":"125px"}},[a("el-form-item",{attrs:{label:"类型："}},[a("el-select",{staticClass:"f_select4",attrs:{filterable:"","allow-create":"",placeholder:"请选择"},model:{value:t.template_from.templateType,callback:function(e){t.$set(t.template_from,"templateType",e)},expression:"template_from.templateType"}},t._l(t.type_options,function(t){return a("el-option",{key:t.id,attrs:{label:t.val,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"模板名称："}},[a("el-input",{staticClass:"f_input4",attrs:{disabled:t.templateDisable},model:{value:t.template_from.templateName,callback:function(e){t.$set(t.template_from,"templateName",e)},expression:"template_from.templateName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"展示形式："}},[a("el-radio-group",{staticClass:"f_radio1",model:{value:t.template_from.showType,callback:function(e){t.$set(t.template_from,"showType",e)},expression:"template_from.showType"}},[a("el-radio",{attrs:{label:1}},[t._v("平铺")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("轮播")])],1)],1),t._v(" "),a("el-form-item",{staticClass:"upload_img",attrs:{label:"上传图片："}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:t.apiUrl.uploadImgUrl,"on-success":t.handleSuccess,"on-remove":t.handleRemove,beforeUpload:t.beforeAvatarUpload,onError:t.uploadError,"with-credentials":!0,"file-list":t.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png/gif文件，且不超过2MB")])],1)],1),t._v(" "),a("el-form-item",{class:{none:"1"==t.template_from.showType},attrs:{label:"轮播间隔："}},[a("el-select",{staticClass:"f_select2 clear_f_select2",attrs:{placeholder:"500"},model:{value:t.template_from.intervalTime,callback:function(e){t.$set(t.template_from,"intervalTime",e)},expression:"template_from.intervalTime"}},[a("el-option",{attrs:{label:300,value:"300"}}),t._v(" "),a("el-option",{attrs:{label:400,value:"400"}}),t._v(" "),a("el-option",{attrs:{label:500,value:"500"}}),t._v(" "),a("el-option",{attrs:{label:600,value:"600"}}),t._v(" "),a("el-option",{attrs:{label:700,value:"700"}})],1)],1),t._v(" "),a("el-form-item",{staticClass:"lunbo",class:{none:"1"==t.template_from.showType},attrs:{label:"轮播最后一帧停止："}},[a("el-radio-group",{model:{value:t.template_from.lastFrameStop,callback:function(e){t.$set(t.template_from,"lastFrameStop",e)},expression:"template_from.lastFrameStop"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),t._v(" "),a("el-form-item",{staticClass:"form_button"},[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v(t._s(t.but_text))]),t._v(" "),a("el-button",{on:{click:function(e){t.go_back()}}},[t._v("返回")])],1)],1)],1),t._v(" "),a("div",{staticClass:"page_d_con_right"},[a("div",{staticClass:"page_d_current page_create_current"},[a("div",{staticClass:"current_page_title create_page_title"},[t._v("落地页预览")]),t._v(" "),a("div",{staticClass:"current_img"},t._l(t.template_from.picUrls,function(t){return a("img",{staticClass:"image",attrs:{src:t.replace(/^\d+@#@/g,"").replace(/8888/g,"8080")}})}))]),t._v(" "),a("div",{staticClass:"page_d_alt",class:{none:!t.saveAlt.status}},[t._v("\n                        提示：保存已生效，生效时间："),a("span",[t._v(t._s(t.saveAlt.date))])]),t._v(" "),a("p",{staticClass:"edit delete"},[t.templateDisable?a("button",{staticClass:"el-button button el-button--primary",attrs:{type:"button"},on:{click:t.deleteTemplate}},[a("span",[t._v("删除")])]):t._e()])])])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_d_title"},[a("i"),a("span",[t._v("模板录入")])])}],r={render:l,staticRenderFns:s};e.a=r},O0WB:function(t,e,a){"use strict";var l=a("HzJ8"),s=a.n(l);e.a={data:function(){return{but_text:"创建",template_from:{id:"",type:"2",templateType:"",productID:"",designerID:"",templateName:"",showType:1,intervalTime:"500",lastFrameStop:0,picUrls:[]},templateId:"",templateDisable:!1,saveAlt:{status:!1,date:""},fileList:[],type_options:[{id:"1",val:"设计1"},{id:"2",val:"设计2"},{id:"3",val:"设计3"},{id:"4",val:"设计4"},{id:"5",val:"设计5"}]}},created:function(){this.template_from.designerID="2"==sessionStorage.userType?sessionStorage.userId:"",this.pageInfo()},methods:{pageInfo:function(){var t=this;this.$http({method:"get",url:this.apiUrl.getListUrl,params:{type:"2"}}).then(function(e){var a=e.data;1==a.status?t.type_options=a.list:console.log(a.msg)}).catch(function(t){console.log(t)}),""!=this.$route.query.templateId&&(this.templateDisable=!0,this.templateId=decodeURIComponent(this.$route.query.templateId),this.but_text="保存",this.$http({method:"get",url:this.apiUrl.templateGetUrl,params:{id:this.templateId}}).then(function(e){if(200==e.status){t.template_from=e.data,t.template_from.picUrls=t.picSort(t.template_from.picUrls,"@#@");var a=[],l=!0,r=!1,i=void 0;try{for(var o,n=s()(t.template_from.picUrls);!(l=(o=n.next()).done);l=!0){var p=o.value;a.push({name:t.picSubName(p),url:p})}}catch(t){r=!0,i=t}finally{try{!l&&n.return&&n.return()}finally{if(r)throw i}}t.fileList=a}}).catch(function(t){console.log(t)}))},onSubmit:function(){var t=this;if(this.template_from.picUrls.length>0){this.template_from.picUrls=this.pic_sort(this.template_from.picUrls),"保存"==this.but_text&&(this.template_from.id=this.templateId);var e="";e="保存"==this.but_text?this.apiUrl.templateUpdateUrl:this.apiUrl.templateNewUrl,this.$http({method:"post",url:e,data:this.template_from}).then(function(e){1==e.data.status?(t.saveAlt.status=!0,t.saveAlt.date=(new Date).toLocaleString(),t.$message({type:"success",message:"操作成功"})):t.$message({type:"error",message:"操作失败"})}).catch(function(t){console.log(t)})}else this.$message({type:"info",message:"请上传图片"})},handleRemove:function(t,e){this.template_from.picUrls=[];var a=!0,l=!1,r=void 0;try{for(var i,o=s()(e);!(a=(i=o.next()).done);a=!0){var n=i.value;n.response?this.template_from.picUrls.push(n.response.url):this.template_from.picUrls.push(n.url)}}catch(t){l=!0,r=t}finally{try{!a&&o.return&&o.return()}finally{if(l)throw r}}},handleSuccess:function(t,e,a){this.template_from.picUrls.push(t.url)},uploadError:function(t,e,a){this.$message({type:"error",message:"上传失败，请重试"})},beforeAvatarUpload:function(t){var e=t.name.split("."),a=e.length-1,l="jpg"===e[a],s="gif"===e[a],r="png"===e[a],i=t.size/1024/1024<2;return l||s||r||this.$message({type:"info",message:"上传模板只能是 jpg、gif、png 格式"}),i||this.$message({type:"info",message:"上传图片大小不能超过 2MB"}),l||s||r&&i},deleteTemplate:function(){var t=this;this.$confirm("此操作将永久删除该模板, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http({method:"delete",url:t.apiUrl.templateDelUrl,params:{id:t.templateId}}).then(function(e){1==e.data.status?(t.$message({type:"success",message:"删除成功"}),t.$router.push({path:"templateList"})):t.$message({type:"error",message:"模板正在使用，删除失败"})}).catch(function(e){t.$message({type:"error",message:"删除失败"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},go_back:function(){this.$router.back()}}}},bOWV:function(t,e,a){e=t.exports=a("UTlt")(!0),e.push([t.i,".template_input .f_select2 .el-input__inner{width:56px}","",{version:3,sources:["/Users/pby/dev/cmsweb/src/views/imgTemplate/templateInput.vue"],names:[],mappings:"AACA,4CACE,UAAY,CACb",file:"templateInput.vue",sourcesContent:["\n.template_input .f_select2 .el-input__inner {\n  width: 56px;\n}\n"],sourceRoot:""}])},dXD8:function(t,e,a){"use strict";function l(t){a("+LlI")}Object.defineProperty(e,"__esModule",{value:!0});var s=a("O0WB"),r=a("BP65"),i=a("vSla"),o=l,n=i(s.a,r.a,!1,o,null,null);e.default=n.exports}});
//# sourceMappingURL=44.58544e51992135bbd44c.js.map