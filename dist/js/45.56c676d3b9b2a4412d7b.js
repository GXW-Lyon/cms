webpackJsonp([45],{"30v6":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"img_template"},[s("div",{staticClass:"con_search"},[s("div",{staticClass:"con_search_left"},[s("el-select",{staticClass:"con_select",attrs:{placeholder:"类型"},on:{change:t.select},model:{value:t.page.templateType,callback:function(e){t.$set(t.page,"templateType",e)},expression:"page.templateType"}},t._l(t.type_options,function(t){return s("el-option",{key:t.id,attrs:{label:t.val,value:t.id}})})),t._v(" "),s("el-select",{staticClass:"con_select",attrs:{placeholder:"设计"},on:{change:t.select},model:{value:t.page.designerID,callback:function(e){t.$set(t.page,"designerID",e)},expression:"page.designerID"}},t._l(t.design_options,function(t){return s("el-option",{key:t.id,attrs:{label:t.val,value:t.id}})}))],1),t._v(" "),s("div",{staticClass:"con_search_right",on:{click:function(e){t.template_input()}}},[s("el-button",{attrs:{type:"primary"}},[s("i",{staticClass:"el-icon-plus"}),t._v("新建模板")])],1)]),t._v(" "),s("div",{staticClass:"con_list"},[s("el-row",t._l(t.listInfo,function(e,a){return s("el-col",{key:a,attrs:{span:5,offset:a>0?2:0}},[s("el-card",{attrs:{"body-style":{padding:"0px"}}},[s("div",{staticClass:"img_preview",on:{click:function(s){t.pic_preview(e.id,e.picUrls)}}},t._l(e.picUrls,function(t){return s("img",{staticClass:"image",attrs:{src:t}})})),t._v(" "),s("div",{staticClass:"img_bottom_alt img_t_bottom_alt",staticStyle:{"padding-left":"12px"}},[s("span",[t._v(t._s(e.name))]),t._v(" "),s("p",{staticClass:"edit e_visible",on:{click:function(s){t.template_input(e.id)}}},[s("el-button",{staticClass:"button",attrs:{type:"primary"}},[t._v("编辑")])],1)])])],1)}))],1),t._v(" "),s("div",{staticClass:"con_pager"},[s("div",{staticClass:"block"},[s("el-pagination",{attrs:{layout:"prev, pager, next",total:t.page.count},on:{"current-change":t.handleCurrentChange}})],1)]),t._v(" "),s("div",{staticClass:"page_d_con_right big_img",class:{none:!t.replaceInfo.status}},[s("i",{staticClass:"el-icon-close",on:{click:t.exit_replace}}),t._v(" "),s("div",{staticClass:"page_d_current page_create_current"},[s("div",{staticClass:"current_page_title create_page_title"},[t._v("落地页预览")]),t._v(" "),s("div",{staticClass:"replace_img"},[t.replaceInfo.clearCDNstatus?s("p",{staticClass:"edit refresh"},[s("button",{staticClass:"el-button button el-button--primary",attrs:{type:"button"},on:{click:function(e){t.clearCDN(t.replaceInfo.id)}}},[s("span",[t._v("清除缓存")])])]):t._e(),t._v(" "),s("el-input",{attrs:{placeholder:"输入落地页ID替换图片"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.replace_button(e):null}},model:{value:t.replaceInfo.id,callback:function(e){t.$set(t.replaceInfo,"id",e)},expression:"replaceInfo.id"}},[s("el-button",{attrs:{slot:"append"},on:{click:t.replace_button},slot:"append"},[t._v("替换")])],1)],1),t._v(" "),s("div",{staticClass:"current_img"},t._l(t.replaceInfo.picUrls,function(t){return s("img",{staticClass:"image replaceImg",attrs:{src:t}})}))])]),t._v(" "),s("div",{staticClass:"mengceng",class:{none:!t.replaceInfo.mengcengStatus},on:{click:t.exit_replace}})])])},i=[],n={render:a,staticRenderFns:i};e.a=n},C16Q:function(t,e,s){"use strict";function a(t){s("Ui3d")}Object.defineProperty(e,"__esModule",{value:!0});var i=s("gpDh"),n=s("30v6"),l=s("vSla"),c=a,o=l(i.a,n.a,!1,c,null,null);e.default=o.exports},"MFo+":function(t,e,s){e=t.exports=s("UTlt")(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"templateDisplay.vue",sourceRoot:""}])},Ui3d:function(t,e,s){var a=s("MFo+");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s("FIqI")("e08290a6",a,!0,{})},gpDh:function(t,e,s){"use strict";e.a={data:function(){return{listInfo:[],page:{offset:1,limit:10,count:0,productID:"",designerID:"",templateType:""},replaceInfo:{mengcengStatus:!1,status:!1,clearCDNstatus:!1,id:"",templateID:"",picUrls:[]},templateId:"",design_options:[{id:"",val:""}],type_options:[{id:"",val:""}],isFirstEnter:!1}},created:function(){this.isFirstEnter=!0},activated:function(){this.$route.meta.isBack&&!this.isFirstEnter||this.selectInfo(),this.$route.meta.isBack=!1,this.isFirstEnter=!1,this.pageInfo()},methods:{selectInfo:function(){var t=this;this.$http({method:"get",url:this.apiUrl.getListUrl,params:{type:"2"}}).then(function(e){var s=e.data;1==s.status?t.type_options=t.selectPush(s.list):console.log(s.msg)}).catch(function(t){console.log(t)}),this.$http({method:"get",url:this.apiUrl.getListUrl,params:{type:"1"}}).then(function(e){var s=e.data;1==s.status?t.design_options=t.selectPush(s.list):console.log(s.msg)}).catch(function(t){console.log(t)})},pageInfo:function(){var t=this;this.$http({method:"get",url:this.apiUrl.templateListsUrl,params:{type:"2",offset:this.page.offset,limit:this.page.limit,templateType:this.page.templateType,designerID:this.page.designerID}}).then(function(e){var s=e.data;1==s.status&&(t.page.count=s.count,t.listInfo=s.list,t.listInfo.forEach(function(e,s){t.listInfo[s].picUrls=t.picSort(e.picUrls,"@#@")}))}).catch(function(t){console.log(t)})},select:function(){this.pageInfo()},handleCurrentChange:function(t){this.page.offset=t,this.pageInfo()},template_input:function(t){"1"==sessionStorage.userType?this.$message({type:"info",message:"您不是设计师，没有此权限"}):(this.templateId=void 0!==t?t:"",this.$router.push({path:"templateInput",query:{templateId:encodeURIComponent(this.templateId)}}))},pic_preview:function(t,e){this.replaceInfo.status=!0,this.replaceInfo.mengcengStatus=!0,this.replaceInfo.clearCDNstatus=!1,this.replaceInfo.picUrls=e,this.replaceInfo.templateID=t},replace_button:function(){var t=this;this.$http({method:"post",url:this.apiUrl.landpageUpdateUrl,data:{onlyUpdateTemplateId:!0,id:this.replaceInfo.id,templateID:this.replaceInfo.templateID,lastEditerId:sessionStorage.userId}}).then(function(e){1==e.data.status?(t.$message({type:"success",message:"替换成功"}),t.replaceInfo.clearCDNstatus=!0):t.$message({type:"error",message:"替换成功"})}).catch(function(t){console.log(t)})},clearCDN:function(t){var e=this;this.$http({method:"get",url:this.apiUrl.landpageRefreshUrl,params:{id:t}}).then(function(t){1==t.data.status?(e.$message({type:"success",message:"清除成功"}),e.exit_replace()):e.$message({type:"error",message:"清除失败"})}).catch(function(t){console.log(t)})},exit_replace:function(){this.replaceInfo.status=!1,this.replaceInfo.mengcengStatus=!1}}}}});
//# sourceMappingURL=45.56c676d3b9b2a4412d7b.js.map