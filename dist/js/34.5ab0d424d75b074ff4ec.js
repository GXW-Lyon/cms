webpackJsonp([34],{"3ei4":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"info_flow_content",on:{click:t.bodyEvent}},[i("div",{staticClass:"menuNav"},[i("p",[i("i",{staticClass:"nav_index"}),t._l(t.menu_nav,function(e,a){return i("span",{key:a},[i("i",{staticClass:"el-icon-arrow-right"}),i("em",[t._v(t._s(e))])])})],2)]),t._v(" "),i("div",{staticClass:"info_ad_search"},[i("div",{staticClass:"info_a_s_content"},[i("div",{staticClass:"customerProCitySearch"},[i("el-input",{staticClass:"page_d_select",attrs:{placeholder:"请输入合同编号"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.pageInfo(e):null}},model:{value:t.contractNo,callback:function(e){t.contractNo=e},expression:"contractNo"}}),t._v(" "),i("el-button",{staticClass:"page_d_s_button",on:{click:t.pageInfo}},[t._v("搜索")]),t._v(" "),i("el-select",{staticClass:"con_select unBorderRadius",attrs:{placeholder:t.customer_items.placeHolder},model:{value:t.customer_items.model_value,callback:function(e){t.$set(t.customer_items,"model_value",e)},expression:"customer_items.model_value"}},t._l(t.customer_items.options,function(t){return i("el-option",{key:t.customerCode,attrs:{label:t.customerName,value:t.customerCode}})})),t._v(" "),i("el-select",{staticClass:"con_select unBorderRadius",attrs:{placeholder:t.contract_items.placeHolder},model:{value:t.contract_items.model_value,callback:function(e){t.$set(t.contract_items,"model_value",e)},expression:"contract_items.model_value"}},t._l(t.contract_items.options,function(t){return i("el-option",{key:t.id,attrs:{label:t.val,value:t.id}})})),t._v(" "),i("el-button",{staticClass:"page_d_s_button",on:{click:t.pageInfo}},[t._v("查询")]),t._v(" "),i("div",{staticClass:"dateBut",on:{click:t.newContract}},[i("el-button",{attrs:{type:"primary"}},[i("i",{staticClass:"el-icon-plus"}),t._v("新建合同")])],1)],1)])]),t._v(" "),i("div",{staticClass:"info_ad_table"},[i("div",{staticClass:"page_d_title"},[i("i",{staticStyle:{visibility:"hidden"}}),i("span"),t._v(" "),i("div",{staticClass:"tableVisibleMenu"},[i("p",{staticClass:"visibleMenuBut",on:{click:function(e){t.changeCheckStatus(e)}}}),t._v(" "),t.visibleMenuSelectStatus?i("div",{staticClass:"visibleMenuSelect",on:{click:function(e){t.preventDefault(e)}}},[i("el-checkbox-group",{attrs:{min:1},on:{change:t.checkedChange},model:{value:t.checkedCities,callback:function(e){t.checkedCities=e},expression:"checkedCities"}},t._l(t.cities,function(e){return i("el-checkbox",{key:e,attrs:{label:e}},[t._v(t._s(e))])}))],1):t._e()])]),t._v(" "),i("div",{staticClass:"tableDetail"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命加载中",data:t.tableData,border:"",stripe:""}},[t._l(t.table_column,function(e,a){return e.visible?i("el-table-column",{key:a,attrs:{fixed:e.fixed,sortable:e.sortable,prop:e.prop,label:e.label,formatter:e.format,"min-width":e.minwidth,width:"auto"}}):t._e()}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"查看合同",width:"80","min-width":"80","class-name":"exitBut"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{on:{click:function(i){t.exitEvent(e.row.id,e.column.label)}}},[i("i",{staticClass:"el-icon-view"})])]}}])})],2)],1)]),t._v(" "),i("div",{staticClass:"con_pager"},[i("div",{staticClass:"block"},[i("el-pagination",{attrs:{"current-page":t.page.currentPage,"page-sizes":t.page.sizes,"page-size":t.page.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.page.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.page,"currentPage",e)}}})],1)])])])},s=[],n={render:a,staticRenderFns:s};e.a=n},A59J:function(t,e,i){e=t.exports=i("UTlt")(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"customerContractMana.vue",sourceRoot:""}])},H71m:function(t,e,i){"use strict";var a=i("HzJ8"),s=i.n(a);e.a={data:function(){var t=this;return{loading:!1,visibleMenuSelectStatus:!1,checkedCities:["序号","合同编号","客户主体","开始时间","结束时间","合同状态","审核状态"],cities:["序号","合同编号","客户主体","开始时间","结束时间","合同状态","审核状态"],table_column:[{fixed:!0,prop:"id",label:"序号",sortable:!0,visible:!0,minwidth:70},{fixed:!1,prop:"contractNo",label:"合同编号",sortable:!1,visible:!0,minwidth:160},{fixed:!1,prop:"name",label:"客户主体",sortable:!1,visible:!0,minwidth:300},{fixed:!1,prop:"beginTime",label:"开始时间",sortable:!1,visible:!0,minwidth:90},{fixed:!1,prop:"endTime",label:"结束时间",sortable:!1,visible:!0,minwidth:90},{fixed:!1,prop:"status",label:"合同状态",sortable:!0,visible:!0,minwidth:100,format:function(t,e){switch(t.status){case 0:return"-";case 1:return"正常";case 2:return"即将过期";case 3:return"已过期"}}},{fixed:!1,prop:"checkStatus",label:"审核状态",sortable:!0,visible:!0,minwidth:100,format:function(e,i){return t.$store.getters.findDingStatus(e.checkStatus)?t.$store.getters.findDingStatus(e.checkStatus).val:"未开始"}}],page:{sizes:[10,20,50,100,200,500],offset:1,limit:10,count:0,currentPage:1},menu_nav:["信息流数据管理","客户合同管理"],customer_items:{model_value:"",placeHolder:"全部客户",options:[]},contract_items:{model_value:"",placeHolder:"全部状态",options:[{id:"0",val:"全部状态"},{id:"1",val:"正常"},{id:"2",val:"即将过期"},{id:"3",val:"已过期"}]},tableData:[],contractNo:"",isFirstEnter:!1}},activated:function(){this.$route.meta.isBack&&!this.isFirstEnter||this.customerInfo(),this.$route.meta.isBack=!1,this.isFirstEnter=!1,this.pageInfo()},created:function(){this.isFirstEnter=!0},methods:{customerInfo:function(){var t=this;this.$http({method:"get",url:this.apiUrl.fdpCusGetCustomerList,params:{offset:1,limit:9999,val:""}}).then(function(e){if(200==e.status){var i=e.data;i.unshift({customerCode:"0",customerName:"全部客户"});t.customer_items.options=i}}).catch(function(t){console.log(t)})},pageInfo:function(){var t=this;this.loading=!0,this.$http({method:"get",url:this.apiUrl.fdpConSearchCustomer,params:{offset:this.page.offset,limit:this.page.limit,contractNo:this.contractNo,customerCode:"0"==this.customer_items.model_value?this.customer_items.model_value="":this.customer_items.model_value,contractStatus:this.contract_items.model_value}}).then(function(e){if(t.loading=!1,200==e.status){var i=e.data;t.page.count=i.totalNums,t.tableData=i.items}}).catch(function(e){console.log(e),t.loading=!1})},handleCurrentChange:function(t){this.page.offset=t,this.pageInfo()},handleSizeChange:function(t){this.page.limit=t,this.pageInfo()},checkedChange:function(){var t=!0,e=!1,i=void 0;try{for(var a,n=s()(this.table_column);!(t=(a=n.next()).done);t=!0){var o=a.value,l=this.checkedCities.indexOf(o.label);o.visible=l>=0}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}},changeCheckStatus:function(t){t.stopPropagation(),this.visibleMenuSelectStatus=!this.visibleMenuSelectStatus},newContract:function(){this.$router.push({path:"cusContractNew",query:{customerContractId:""}})},bodyEvent:function(){this.visibleMenuSelectStatus=!1},preventDefault:function(t){t.stopPropagation()},exitEvent:function(t,e){this.$router.push({path:"cusContractEdit",query:{customerContractId:t,titleName:e}})}}}},SVUT:function(t,e,i){var a=i("A59J");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("FIqI")("0b7942d8",a,!0,{})},YHDA:function(t,e,i){"use strict";function a(t){i("SVUT")}Object.defineProperty(e,"__esModule",{value:!0});var s=i("H71m"),n=i("3ei4"),o=i("vSla"),l=a,c=o(s.a,n.a,!1,l,null,null);e.default=c.exports}});
//# sourceMappingURL=34.5ab0d424d75b074ff4ec.js.map