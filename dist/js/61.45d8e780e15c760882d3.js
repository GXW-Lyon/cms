webpackJsonp([61],{"/12q":function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__=__webpack_require__("HzJ8"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__);__webpack_exports__.a={data:function(){return{randImgSrc:"",randValue:"",cookie:"",checked:!0,loading:!1,visibleMenuSelectStatus:!1,checkedCities:["账号","日期","渠道号","应用名称","激活数","留存率","失败原因"],cities:["账号","日期","渠道号","应用名称","激活数","留存率","失败原因"],citiesFilterVal:["account","date","channel","appName","jihuo","liucun","failReason"],table_column:[{fixed:!1,prop:"account",label:"账号",sortable:!1,visible:!0},{fixed:!1,prop:"date",label:"日期",sortable:!0,visible:!0},{fixed:!1,prop:"channel",label:"渠道号",sortable:!1,visible:!0},{fixed:!1,prop:"appName",label:"应用名称",sortable:!1,visible:!0},{fixed:!1,prop:"jihuo",label:"激活数",sortable:!1,visible:!0},{fixed:!1,prop:"liucun",label:"留存率",sortable:!1,visible:!0},{fixed:!1,prop:"failReason",label:"失败原因",sortable:!1,visible:!0}],menu_nav:["CPA数据管理","内容抓取"],account_items:{model_value:"",placeHolder:"账号",options:["kydsp","kydsp_dy","kydsp_hs","2345-ky","aliyun_ky","2345-dsp"]},tableData:[],dateValue:new Date((new Date).getTime()-864e5),params:{type:"2",val:"",date:""},isFirstEnter:!1}},activated:function(){this.$route.meta.isBack&&!this.isFirstEnter||this.dateChange(),this.$route.meta.isBack=!1,this.isFirstEnter=!1},created:function(){this.isFirstEnter=!0},methods:{getCookie:function(){var t=this;this.randValue="",""!=this.account_items.model_value&&this.$http({method:"get",url:this.apiUrl.importdataGetCookie}).then(function(e){200==e.status&&(t.cookie=e.data,t.getRnd())}).catch(function(t){})},getRnd:function(){var t=this;this.$http({method:"get",url:this.apiUrl.get_captcha,params:{cookie:this.cookie}}).then(function(e){200==e.status&&(t.randImgSrc=e.data)}).catch(function(t){})},pageInfo:function pageInfo(){var _this3=this;return this.loading?(this.$message({type:"info",message:"正在抓取数据中，请稍后再试"}),!1):""==this.params.date?(this.$message({type:"info",message:"请选择日期"}),!1):""==this.account_items.model_value?(this.$message({type:"info",message:"请选择账户"}),!1):""==this.randValue?(this.$message({type:"info",message:"请输入验证码"}),!1):(this.loading=!0,void this.$http({method:"get",url:this.apiUrl.importdataStartFetch,params:{captcha:this.randValue,username:this.account_items.model_value,cookie:this.cookie,date:this.params.date}}).then(function(res){if(_this3.loading=!1,200==res.status){var data=res.data;if("1"==data.status)_this3.$message({type:"info",message:"全部抓取成功"}),_this3.tableData=[];else if("2"==data.status){var obj=eval("("+data.msg+")");obj.forEach(function(t,e){t.account=_this3.account_items.model_value}),_this3.tableData=obj}else _this3.$message({type:"error",message:data.msg}),_this3.account_items.model_value="",_this3.tableData=[]}}).catch(function(t){_this3.loading=!1}))},checkedChange:function(){var t=!0,e=!1,a=void 0;try{for(var i,s=__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(this.table_column);!(t=(i=s.next()).done);t=!0){var n=i.value,l=this.checkedCities.indexOf(n.label);n.visible=l>=0}}catch(t){e=!0,a=t}finally{try{!t&&s.return&&s.return()}finally{if(e)throw a}}},changeCheckStatus:function(t){t.stopPropagation(),this.visibleMenuSelectStatus=!this.visibleMenuSelectStatus},bodyEvent:function(){this.visibleMenuSelectStatus=!1},preventDefault:function(t){t.stopPropagation()},importData:function(){if(0==this.tableData.length)return this.$message({type:"info",message:"请抓取数据"}),!1;var t=this.cities,e=this.citiesFilterVal,a=this.tableData,i=[this.account_items.model_value].join("_");this.handleDownload(t,e,a,i)},dateChange:function(){this.account_items.model_value=this.randValue="",""!=this.dateValue&&void 0!==this.dateValue?this.params.date=this.formatDateTime(this.dateValue,"y-m-d"):this.params.date=""}}}},BhVW:function(t,e,a){"use strict";function i(t){a("uWRV")}Object.defineProperty(e,"__esModule",{value:!0});var s=a("/12q"),n=a("Ze90"),l=a("vSla"),o=i,c=l(s.a,n.a,!1,o,null,null);e.default=c.exports},Ze90:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"info_flow_content customerCollect",on:{click:t.bodyEvent}},[a("div",{staticClass:"menuNav"},[a("p",[a("i",{staticClass:"nav_index"}),t._l(t.menu_nav,function(e,i){return a("span",{key:i},[a("i",{staticClass:"el-icon-arrow-right"}),a("em",[t._v(t._s(e))])])})],2)]),t._v(" "),a("div",{staticClass:"info_ad_search",staticStyle:{height:"auto!important"}},[a("div",{staticClass:"info_a_s_content",staticStyle:{padding:"27px 5%"}},[a("div",{staticClass:"dateSelect"},[a("div",{staticClass:"block",staticStyle:{width:"100%!important",position:"relative"}},[a("span",{staticClass:"demonstration"},[t._v("选择日期")]),t._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},on:{change:t.dateChange},model:{value:t.dateValue,callback:function(e){t.dateValue=e},expression:"dateValue"}}),t._v(" "),a("el-select",{staticClass:"con_select unBorderRadius selectMaxWidth",attrs:{placeholder:t.account_items.placeHolder,filterable:""},on:{change:t.getCookie},model:{value:t.account_items.model_value,callback:function(e){t.$set(t.account_items,"model_value",e)},expression:"account_items.model_value"}},t._l(t.account_items.options,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),t.randImgSrc?a("div",{staticClass:"randImg",domProps:{innerHTML:t._s(t.randImgSrc)}}):t._e(),t.randImgSrc?a("el-input",{staticClass:"el_input_short",attrs:{placeholder:"输入验证码"},model:{value:t.randValue,callback:function(e){t.randValue=e},expression:"randValue"}}):t._e(),t._v(" "),a("el-button",{staticClass:"page_d_s_button",staticStyle:{position:"absolute",top:"50%",transform:"translateY(-50%)","-webkit-transform":"translateY(-50%)",right:"120px"},on:{click:function(e){return e.stopPropagation(),t.pageInfo(e)}}},[t._v("抓取\n                            ")]),t._v(" "),a("el-button",{staticClass:"page_d_s_button",staticStyle:{position:"absolute",top:"50%",transform:"translateY(-50%)","-webkit-transform":"translateY(-50%)",right:"10px"},on:{click:function(e){return e.stopPropagation(),t.importData(e)}}},[t._v("导出当前数据")])],1)])])]),t._v(" "),a("div",{staticClass:"info_ad_table"},[a("div",{staticClass:"page_d_title"},[a("i",{staticStyle:{visibility:"hidden"}}),a("span"),t._v(" "),a("div",{staticClass:"tableVisibleMenu"},[a("p",{staticClass:"visibleMenuBut",on:{click:function(e){t.changeCheckStatus(e)}}}),t._v(" "),t.visibleMenuSelectStatus?a("div",{staticClass:"visibleMenuSelect",on:{click:function(e){t.preventDefault(e)}}},[a("el-checkbox-group",{attrs:{min:1},on:{change:t.checkedChange},model:{value:t.checkedCities,callback:function(e){t.checkedCities=e},expression:"checkedCities"}},t._l(t.cities,function(e){return a("el-checkbox",{key:e,attrs:{label:e}},[t._v(t._s(e))])}))],1):t._e()])]),t._v(" "),a("div",{staticClass:"tableDetail"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命加载中",data:t.tableData,border:"",stripe:""}},t._l(t.table_column,function(e,i){return e.visible?a("el-table-column",{key:i,attrs:{fixed:e.fixed,sortable:e.sortable,prop:e.prop,label:e.label,width:""}}):t._e()}))],1)])])])},s=[],n={render:i,staticRenderFns:s};e.a=n},uWRV:function(t,e,a){var i=a("yP2H");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("FIqI")("48e80503",i,!0,{})},yP2H:function(t,e,a){e=t.exports=a("UTlt")(!0),e.push([t.i,".el-table .cell{word-wrap:inherit!important}","",{version:3,sources:["/Users/pby/dev/cmsweb/src/views/cpaDataMana/contentGrab.vue"],names:[],mappings:"AACA,gBACE,2BAA8B,CAC/B",file:"contentGrab.vue",sourcesContent:["\n.el-table .cell {\n  word-wrap: inherit !important;\n}\n"],sourceRoot:""}])}});
//# sourceMappingURL=61.45d8e780e15c760882d3.js.map