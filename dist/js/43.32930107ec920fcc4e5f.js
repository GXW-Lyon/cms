webpackJsonp([43],{"7+Ys":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"info_flow_content",on:{click:t.bodyEvent}},[a("div",{staticClass:"menuNav"},[a("p",[a("i",{staticClass:"nav_index"}),t._l(t.menu_nav,function(e,i){return a("span",{key:i},[a("i",{staticClass:"el-icon-arrow-right"}),a("em",[t._v(t._s(e))])])})],2)]),t._v(" "),a("div",{staticClass:"info_ad_search"},[a("div",{staticClass:"info_a_s_content"},[a("div",{staticClass:"dateSelect"},[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[t._v("选择日期")]),t._v(" "),a("el-date-picker",{staticStyle:{"margin-top":"2px"},attrs:{type:"daterange",align:"right",placeholder:"选择日期范围",format:"yyyy / MM / dd","picker-options":t.$store.state.pickerOptions2},on:{change:t.dateChange},model:{value:t.dateValue,callback:function(e){t.dateValue=e},expression:"dateValue"}}),t._v(" "),a("el-button",{staticClass:"page_d_s_button",staticStyle:{"margin-left":"125px"},on:{click:t.refresh}},[t._v("刷新")])],1),t._v(" "),a("div",{staticClass:"dateBut"},[a("el-select",{staticClass:"con_select unBorderRadius",style:{"vertical-align":"top",width:"150px","margin-top":"2px"},attrs:{placeholder:"导入数据所属平台",clearable:""},model:{value:t.importPlatform,callback:function(e){t.importPlatform=e},expression:"importPlatform"}},t._l(t.platform_items.options,function(t){return a("el-option",{key:t.platformId,attrs:{label:t.platformName,value:t.platformId}})})),t._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:t.apiUrl.fdpAccImport,data:t.uploadData,"with-credentials":!0,"on-success":t.handleSuccess,beforeUpload:t.beforeAvatarUpload,onError:t.uploadError,"show-file-list":!1,"file-list":t.fileList}},[a("el-button",{attrs:{type:"primary",disabled:""==this.importPlatform,title:""==this.importPlatform?"请选择数据所属平台":null}},[a("i",{staticClass:"el-icon-plus"}),t._v("导入数据")])],1),t._v(" "),a("el-button",{style:{"margin-left":"29px"},attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.importData(e)}}},[t._v("导出数据\n                        ")])],1)]),t._v(" "),a("div",{staticClass:"realTimeCitySearch"},[a("el-select",{staticClass:"con_select unBorderRadius",attrs:{clearable:"",placeholder:t.platform_items.placeHolder},on:{change:t.select},model:{value:t.platform_items.model_value,callback:function(e){t.$set(t.platform_items,"model_value",e)},expression:"platform_items.model_value"}},t._l(t.platform_items.options,function(t){return a("el-option",{key:t.platformId,attrs:{label:t.platformName,value:t.platformId}})})),t._v(" "),a("el-select",{staticClass:"con_select unBorderRadius",attrs:{clearable:"",placeholder:t.pro_items.placeHolder},model:{value:t.pro_items.model_value,callback:function(e){t.$set(t.pro_items,"model_value",e)},expression:"pro_items.model_value"}},t._l(t.pro_items.options,function(t){return a("el-option",{key:t.productId,attrs:{label:t.productName,value:t.productId}})})),t._v(" "),a("el-select",{staticClass:"con_select unBorderRadius",attrs:{clearable:"",placeholder:t.account_items.placeHolder,filterable:""},model:{value:t.account_items.model_value,callback:function(e){t.$set(t.account_items,"model_value",e)},expression:"account_items.model_value"}},t._l(t.account_items.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-button",{staticClass:"page_d_s_button",on:{click:t.selectBtn}},[t._v("查询")]),t._v(" "),a("a",{attrs:{href:"http://kydev.oss-cn-beijing.aliyuncs.com/file/importModel.xlsx"}},[a("el-button",{staticClass:"page_d_s_button",style:{"margin-left":"29px",float:"right"}},[t._v("下载导入数据模板")])],1)],1)])]),t._v(" "),a("div",{staticClass:"info_ad_table"},[a("div",{staticClass:"page_d_title"},[a("i",{staticStyle:{visibility:"hidden"}}),a("span"),t._v(" "),a("div",{staticClass:"tableVisibleMenu"},[a("p",{staticClass:"visibleMenuBut",on:{click:function(e){return e.stopPropagation(),t.changeCheckStatus(e)}}}),t._v(" "),t.visibleMenuSelectStatus?a("div",{staticClass:"visibleMenuSelect",on:{click:function(t){t.stopPropagation()}}},[a("el-checkbox-group",{attrs:{min:1},on:{change:t.checkedChange},model:{value:t.checkedCities,callback:function(e){t.checkedCities=e},expression:"checkedCities"}},t._l(t.cities,function(e){return a("el-checkbox",{key:e,attrs:{label:e}},[t._v(t._s(e))])}))],1):t._e()])]),t._v(" "),a("div",{staticClass:"tableDetail"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,"element-loading-text":"拼命加载中",border:"",stripe:""}},[t._l(t.table_column,function(e,i){return e.visible?a("el-table-column",{key:e.prop,attrs:{fixed:e.fixed,sortable:e.sortable,prop:e.prop,label:e.label,formatter:e.format,width:"auto","min-width":e.minwidth}}):t._e()}),t._v(" "),a("el-table-column",{attrs:{label:"今日消耗","min-width":"150","class-name":"exitInput"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",["总计"==e.row.dataTime?a("span",[t._v(t._s(e.row.todayConsume))]):t._e(),t._v(" "),"总计"!=e.row.dataTime?a("el-input",{staticStyle:{width:"80%!important"},attrs:{type:"number",placeholder:"",value:e.row.todayConsume},on:{change:function(a){e.row.newTodayConsume=t.changeInput(a)}}}):t._e()],1)]}}])}),t._v(" "),t._l(t.table_column_,function(e,i){return e.visible?a("el-table-column",{key:e.prop,attrs:{fixed:e.fixed,sortable:e.sortable,prop:e.prop,label:e.label,formatter:e.format,width:"auto","min-width":e.minwidth}}):t._e()}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"50","class-name":"exitBut"},scopedSlots:t._u([{key:"default",fn:function(e){return["总计"!=e.row.dataTime?a("div",{on:{click:function(a){t.updateConsume(e.row.newTodayConsume,e.row.id)}}},[a("span",{staticClass:"r_span"},[t._v("修改")])]):t._e()]}}])})],2)],1)]),t._v(" "),a("div",{staticClass:"con_pager"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.page.currentPage,"page-sizes":t.page.sizes,"page-size":t.page.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.page.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.page,"currentPage",e)}}})],1)]),t._v(" "),t.importTitleStatus?a("div",{staticClass:"importTitle",on:{click:function(t){t.stopPropagation()}}},[a("div",{staticClass:"importTitle_top"},[a("span",[t._v("提示")]),t._v(" "),a("button",{on:{click:function(e){return e.stopPropagation(),t.exitImportTitle(e)}}},[t._v("×")])]),t._v(" "),a("div",{staticClass:"importTitleTxt",domProps:{innerHTML:t._s(t.importTitleTxt)}})]):t._e()])])},s=[],o={render:i,staticRenderFns:s};e.a=o},PJFF:function(t,e,a){e=t.exports=a("UTlt")(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"accountData.vue",sourceRoot:""}])},pb5h:function(t,e,a){"use strict";function i(t){a("z4S3")}Object.defineProperty(e,"__esModule",{value:!0});var s=a("yOuO"),o=a("7+Ys"),l=a("vSla"),n=i,r=l(s.a,o.a,!1,n,null,null);e.default=r.exports},yOuO:function(t,e,a){"use strict";var i=a("HzJ8"),s=a.n(i);e.a={data:function(){return{loading:!1,fileList:[],uploadData:{platformId:""},visibleMenuSelectStatus:!1,importTitleStatus:!1,importTitleTxt:"",checkedCities:["日期","产品","账号名称","今日折后消耗","平台","运营人"],cities:["日期","产品","账号名称","今日折后消耗","平台","运营人"],importCities:["日期","产品","账号名称","今日消耗","今日折后消耗","平台","运营人"],citiesFilterVal:["dataTime","productName","accountName","yestConsume","todayConsume","todayBalance","platformName","operator"],table_column:[{fixed:!1,prop:"dataTime",label:"日期",sortable:!0,visible:!0},{fixed:!1,prop:"productName",label:"产品",sortable:!1,visible:!0},{fixed:!1,prop:"accountName",label:"账号名称",sortable:!1,visible:!0,minwidth:250}],table_column_:[{fixed:!1,prop:"todayBalance",label:"今日折后消耗",sortable:!1,visible:!0,minwidth:110},{fixed:!1,prop:"platformName",label:"平台",sortable:!1,visible:!0,minwidth:100},{fixed:!1,prop:"operator",label:"运营人",sortable:!1,visible:!0,minwidth:100}],page:{sizes:[10,20,50,100,200,500],offset:1,limit:10,count:0,currentPage:1},menu_nav:["信息流数据管理","账号数据"],tableData:[],dateValue:"",platform_items:{model_value:"",placeHolder:"平台",options:[]},account_items:{model_value:"",placeHolder:"账号",options:[]},pro_items:{model_value:"",placeHolder:"产品",options:[]},params:{date:""},importPlatform:"",isFirstEnter:!1}},activated:function(){this.$route.meta.isBack&&!this.isFirstEnter||this.platform(),this.$route.meta.isBack=!1,this.isFirstEnter=!1,this.pageInfo()},created:function(){this.isFirstEnter=!0},methods:{platform:function(){var t=this;this.$http({method:"get",url:this.apiUrl.fdpPlaGetPlatformList}).then(function(e){if(200==e.status){var a=e.data;t.platform_items.options=a}}).catch(function(t){console.log(t)})},account:function(){var t=this;this.$http({method:"get",url:this.apiUrl.fdpAccSearchAccount,params:{offset:1,limit:9999,platformId:this.platform_items.model_value}}).then(function(e){if(200==e.status){var a=e.data;t.account_items.model_value="",t.account_items.options=a.items}}).catch(function(t){console.log(t)})},proInfo:function(){var t=this;this.$http({method:"get",url:this.apiUrl.fdpProListall,params:{platformId:this.platform_items.model_value||-1}}).then(function(e){if(200==e.status){var a=e.data;t.pro_items.options=a}}).catch(function(t){console.log(t)})},select:function(){this.account(),this.proInfo()},selectBtn:function(){if(""==this.params.date)return this.$message({type:"info",message:"请选择日期"}),!1;this.pageInfo()},pageInfo:function(){var t=this;this.tableData=[],this.loading=!0,this.$http({method:"get",url:this.apiUrl.fdpAccSearch,params:{curPage:this.page.offset,limit:this.page.limit,productId:this.pro_items.model_value||-1,accountId:this.account_items.model_value||-1,platformId:this.platform_items.model_value||-1,sDateTime:this.params.date}}).then(function(e){t.loading=!1,console.log(e),(e.status=200)&&(t.page.count=e.data.totalNums,t.tableData=e.data.list,t.tableData.length>0&&t.tableData.unshift({dataTime:"总计",todayConsume:e.data.todayAllConsume,todayBalance:e.data.dstCountAllConsume}))}).catch(function(e){t.loading=!1})},handleCurrentChange:function(t){this.page.offset=t,this.pageInfo()},handleSizeChange:function(t){this.page.limit=t,this.pageInfo()},checkedChange:function(){var t=this.table_column.concat(this.table_column_),e=!0,a=!1,i=void 0;try{for(var o,l=s()(t);!(e=(o=l.next()).done);e=!0){var n=o.value,r=this.checkedCities.indexOf(n.label);n.visible=r>=0}}catch(t){a=!0,i=t}finally{try{!e&&l.return&&l.return()}finally{if(a)throw i}}},changeCheckStatus:function(){this.visibleMenuSelectStatus=!this.visibleMenuSelectStatus},handleSuccess:function(t,e,a){this.importTitleTxt=t.msg,this.importTitleStatus=!0},uploadError:function(t,e,a){this.$message({type:"error",message:"上传失败，请重试"})},beforeAvatarUpload:function(t){""!=this.importPlatform&&(this.uploadData.platformId=this.importPlatform);var e=t.name.split("."),a=e.length-1,i="xlsx"===e[a],s="xls"===e[a],o=t.size/1024/1024<2;return i||s||this.$message({type:"info",message:"上传渠道包只能是 xlsx/xls 格式"}),o||this.$message({type:"info",message:"上传包大小不能超过 2MB"}),i||s&&o},bodyEvent:function(){this.visibleMenuSelectStatus=!1},exitImportTitle:function(){this.importTitleStatus=!1,this.pageInfo()},dateChange:function(){""!=this.dateValue&&void 0!==this.dateValue&&null!=this.dateValue[0]&&null!=this.dateValue[1]?this.params.date=this.formatDateTime(this.dateValue[0],"y/m/d")+"-"+this.formatDateTime(this.dateValue[1],"y/m/d"):this.params.date=""},importData:function(){if(0==this.tableData.length)return this.$message({type:"info",message:"请查询数据"}),!1;var t=this.importCities,e=this.citiesFilterVal,a=this.tableData,i=[this.params.date,this.platform_items.model_value,this.account_items.model_value,this.pro_items.model_value,"账号数据"].join("_");this.handleDownload(t,e,a,i)},changeInput:function(t){return t},updateConsume:function(t,e){var a=this;return isNaN(t)?(this.$message({type:"info",message:"请修改今日消耗，并重新提交"}),!1):t<0?(this.$message({type:"info",message:"请填写大于等于0的数值"}),!1):void this.$http({method:"get",url:this.apiUrl.fdpAccModify,params:{id:e,todayConsume:parseFloat(t).toFixed(2)}}).then(function(t){if(console.log(t),200==t.status){var e=t.data;1==e.status?(a.$message({type:"success",message:e.msg}),a.pageInfo()):a.$message({type:"error",message:e.msg})}else a.$message({type:"error",message:"修改失败，请重新提交"})}).catch(function(t){console.log(t),a.$message({type:"error",message:"请重新提交"})})},refresh:function(){var t=this;if(""==this.params.date)return this.$message({type:"info",message:"请选择日期"}),!1;var e=this.params.date.split("-"),a=e[0].replace(/\//g,"-"),i=e[1].replace(/\//g,"-");this.$http({method:"get",url:this.apiUrl.fdpAccOnekeyrefresh,params:{sdate:a,edate:i}}).then(function(e){if(console.log(e),e.status=200){var a=e.data;t.$message({type:1==a.status?"success":"error",message:a.message})}}).catch(function(t){})}}}},z4S3:function(t,e,a){var i=a("PJFF");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("FIqI")("27256fa3",i,!0,{})}});
//# sourceMappingURL=43.32930107ec920fcc4e5f.js.map