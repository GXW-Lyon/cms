webpackJsonp([72],{"6Gru":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"info_flow_content",on:{click:t.bodyEvent}},[s("div",{staticClass:"menuNav"},[s("p",[s("i",{staticClass:"nav_index"}),t._l(t.menu_nav,function(e,a){return s("span",{key:a},[s("i",{staticClass:"el-icon-arrow-right"}),s("em",[t._v(t._s(e))])])})],2)]),t._v(" "),s("div",{staticClass:"info_ad_search"},[s("div",{staticClass:"info_a_s_content"},[s("div",{staticClass:"customerProCitySearch"},[s("div",{staticClass:"block",staticStyle:{"margin-right":"14px"}},[s("span",{staticClass:"demonstration"},[t._v("选择日期")]),t._v(" "),s("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},on:{change:t.dateChange},model:{value:t.dateValue,callback:function(e){t.dateValue=e},expression:"dateValue"}})],1),t._v(" "),s("el-select",{staticClass:"con_select unBorderRadius",attrs:{placeholder:t.customer_items.placeHolder,filterable:""},on:{change:function(e){t.select("1",t.customer_items.model_value)}},model:{value:t.customer_items.model_value,callback:function(e){t.$set(t.customer_items,"model_value",e)},expression:"customer_items.model_value"}},t._l(t.customer_items.options,function(t){return s("el-option",{key:t.customerCode,attrs:{label:t.name,value:t.customerCode}})})),t._v(" "),s("el-select",{staticClass:"con_select unBorderRadius",attrs:{placeholder:t.pro_items.placeHolder},on:{change:function(e){t.select("2",t.pro_items.model_value)}},model:{value:t.pro_items.model_value,callback:function(e){t.$set(t.pro_items,"model_value",e)},expression:"pro_items.model_value"}},t._l(t.pro_items.options,function(t){return s("el-option",{key:t.id,attrs:{label:t.productName,value:t.customerProductCode}})})),t._v(" "),s("el-select",{staticClass:"con_select unBorderRadius",attrs:{placeholder:t.business_items.placeHolder},on:{change:function(t){}},model:{value:t.business_items.model_value,callback:function(e){t.$set(t.business_items,"model_value",e)},expression:"business_items.model_value"}},t._l(t.business_items.options,function(t){return s("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})})),t._v(" "),s("el-button",{staticClass:"page_d_s_button",on:{click:t.pageInfo}},[t._v("查询")]),t._v(" "),s("div",{staticClass:"dateBut"},[s("el-button",{attrs:{type:"primary"},on:{click:t.changePriceBut}},[t._v("批量修改")])],1)],1)])]),t._v(" "),s("div",{staticClass:"info_ad_table"},[s("div",{staticClass:"page_d_title"},[s("i",{staticStyle:{visibility:"hidden"}}),s("span"),t._v(" "),s("div",{staticClass:"tableVisibleMenu"},[s("p",{staticClass:"visibleMenuBut",on:{click:function(e){t.changeCheckStatus(e)}}}),t._v(" "),t.visibleMenuSelectStatus?s("div",{staticClass:"visibleMenuSelect",on:{click:function(e){t.preventDefault(e)}}},[s("el-checkbox-group",{attrs:{min:1},on:{change:t.checkedChange},model:{value:t.checkedCities,callback:function(e){t.checkedCities=e},expression:"checkedCities"}},t._l(t.cities,function(e){return s("el-checkbox",{key:e,attrs:{label:e}},[t._v(t._s(e))])}))],1):t._e()])]),t._v(" "),s("div",{staticClass:"tableDetail"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命加载中",data:t.tableData,border:"",stripe:""}},[t._l(t.table_column,function(e,a){return e.visible?s("el-table-column",{key:a,attrs:{fixed:e.fixed,sortable:e.sortable,prop:e.prop,label:e.label,formatter:e.format,width:"","min-width":"100"}}):t._e()}),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:"100","min-width":"100","class-name":"exitBut"},scopedSlots:t._u([{key:"default",fn:function(e){return["button"==e.row.validStatus?s("span",{staticClass:"r_span",on:{click:t.checkAllEvent}},[t._v(t._s(t.checkAll?"全选":"取消全选"))]):s("el-checkbox",{model:{value:e.row.validStatus,callback:function(s){t.$set(e.row,"validStatus",s)},expression:"scope.row.validStatus"}})]}}])})],2)],1)]),t._v(" "),s("div",{staticClass:"con_pager"},[s("div",{staticClass:"block"},[s("el-pagination",{attrs:{"current-page":t.page.currentPage,"page-sizes":t.page.sizes,"page-size":t.page.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.page.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.page,"currentPage",e)}}})],1)]),t._v(" "),s("el-dialog",{attrs:{title:"输入价格：",visible:t.dialogVisible,size:"tiny"},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("el-input",{attrs:{type:"number",placeholder:""},model:{value:t.params.price,callback:function(e){t.$set(t.params,"price",e)},expression:"params.price"}}),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{height:"auto"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{staticStyle:{height:"auto"},attrs:{type:"primary"},on:{click:t.changePriceSub}},[t._v("确 定")])],1)],1)],1)])},i=[],l={render:a,staticRenderFns:i};e.a=l},WbrF:function(t,e,s){e=t.exports=s("UTlt")(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"changePrices.vue",sourceRoot:""}])},XCxd:function(t,e,s){"use strict";function a(t){s("c+l1")}Object.defineProperty(e,"__esModule",{value:!0});var i=s("jTMK"),l=s("6Gru"),o=s("vSla"),n=a,c=o(i.a,l.a,!1,n,null,null);e.default=c.exports},"c+l1":function(t,e,s){var a=s("WbrF");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s("FIqI")("90411c00",a,!0,{})},jTMK:function(t,e,s){"use strict";var a=s("HzJ8"),i=s.n(a);e.a={data:function(){return{fileList:[],importTitleStatus:!1,importTitleTxt:"",visibleMenuSelectStatus:!1,dialogVisible:!1,loading:!1,checkAll:!0,checkedCities:["产品包代码","价格"],cities:["产品包代码","价格"],table_column:[{fixed:!1,prop:"productChannelCode",label:"产品包代码",sortable:!1,visible:!0},{fixed:!1,prop:"currentPrice",label:"价格",sortable:!1,visible:!0}],dateValue:"",page:{sizes:[100,500],offset:1,limit:100,count:0,currentPage:1},menu_nav:["CPA数据管理","客户批量改价格"],customer_items:{model_value:"",placeHolder:"客户",options:[]},pro_items:{model_value:"",placeHolder:"产品",options:[]},business_items:{model_value:"",placeHolder:"业务模式",options:[]},params:{type:"",val:"",date:"",price:""},tableData:[],idList:[],contractNo:"",isFirstEnter:!1}},activated:function(){this.$route.meta.isBack&&!this.isFirstEnter||(this.customerInfo(),this.businessModel()),this.$route.meta.isBack=!1,this.isFirstEnter=!1},created:function(){this.isFirstEnter=!0},methods:{customerInfo:function(){var t=this;this.$http({method:"get",url:this.apiUrl.customerSearch,params:{offset:1,limit:9999,val:""}}).then(function(e){if(200==e.status){var s=e.data;t.customer_items.options=s.items}}).catch(function(t){console.log(t)})},proInfo:function(){var t=this;this.$http({method:"get",url:this.apiUrl.customerProListLight,params:{customerCode:this.customer_items.model_value}}).then(function(e){if(200==e.status){var s=e.data;t.pro_items.options=s.items,t.pro_items.model_value=""}}).catch(function(t){console.log(t)})},businessModel:function(){var t=this;this.$http({method:"get",url:this.apiUrl.customerProListBiztype}).then(function(e){if(console.log(e),200==e.status){var s=e.data;t.business_items.options=s.lists}}).catch(function(t){console.log(t)})},pageInfo:function(){var t=this;return this.params.date?""==this.customer_items.model_value?(this.$message({type:"info",message:"请选择客户"}),!1):""==this.pro_items.model_value?(this.$message({type:"info",message:"请选择产品"}),!1):void this.$http({method:"get",url:this.apiUrl.customerProListPackage,params:{offset:this.page.offset,limit:this.page.limit,datetime:this.params.date,bizType:this.business_items.model_value,type:this.params.type,code:this.params.val}}).then(function(e){if(console.log(e),200==e.status){var s=e.data;t.page.count=s.totalNums;var a=!0,l=!1,o=void 0;try{for(var n,c=i()(s.items);!(a=(n=c.next()).done);a=!0){n.value.validStatus=!1}}catch(t){l=!0,o=t}finally{try{!a&&c.return&&c.return()}finally{if(l)throw o}}s.items.length>0&&s.items.unshift({validStatus:"button"}),t.checkAll=!0,t.tableData=s.items,t.idList=[]}}).catch(function(t){console.log(t)}):(this.$message({type:"info",message:"请选择日期"}),!1)},select:function(t,e){if(""!=e&&void 0!==e)switch(this.params.type=t,this.params.val=e,t){case"1":this.proInfo()}},handleCurrentChange:function(t){this.page.offset=t,this.pageInfo()},handleSizeChange:function(t){this.page.limit=t,this.pageInfo()},checkedChange:function(){var t=!0,e=!1,s=void 0;try{for(var a,l=i()(this.table_column);!(t=(a=l.next()).done);t=!0){var o=a.value,n=this.checkedCities.indexOf(o.label);o.visible=n>=0}}catch(t){e=!0,s=t}finally{try{!t&&l.return&&l.return()}finally{if(e)throw s}}},changeCheckStatus:function(t){t.stopPropagation(),this.visibleMenuSelectStatus=!this.visibleMenuSelectStatus},bodyEvent:function(){this.visibleMenuSelectStatus=!1},preventDefault:function(t){t.stopPropagation()},dateChange:function(){""!=this.dateValue&&void 0!==this.dateValue?this.params.date=this.formatDateTime(this.dateValue,"y-m-d"):this.params.date=""},checkAllEvent:function(){var t=!0,e=!0,s=!1,a=void 0;try{for(var l,o=i()(this.tableData);!(e=(l=o.next()).done);e=!0){var n=l.value;"button"!=n.validStatus&&(n.validStatus=this.checkAll,t=!1)}}catch(t){s=!0,a=t}finally{try{!e&&o.return&&o.return()}finally{if(s)throw a}}if(t)return!1;this.checkAll=!this.checkAll},changePriceBut:function(){if(!this.params.date)return this.$message({type:"info",message:"请选择日期"}),!1;this.idList=[];var t=!0,e=!1,s=void 0;try{for(var a,l=i()(this.tableData);!(t=(a=l.next()).done);t=!0){var o=a.value;o.validStatus&&"button"!=o.validStatus&&this.idList.push(o.customerProductCode+"|"+o.productChannelCode)}}catch(t){e=!0,s=t}finally{try{!t&&l.return&&l.return()}finally{if(e)throw s}}if(0==this.idList.length)return this.$message({type:"info",message:"请选择包"}),!1;this.params.price="",this.dialogVisible=!0},changePriceSub:function(){this.params.price?this.changePriceApi():this.$message({type:"info",message:"请输入价格"})},changePriceApi:function(){var t=this;this.dialogVisible=!1,this.loading=!0,this.$http({method:"post",url:this.apiUrl.customerProUpdatePackage,data:{datetime:this.params.date,customerProductCode:this.idList,prices:this.params.price}}).then(function(e){console.log(e),t.loading=!1,(e.status=200)&&(1==e.data.status?(t.$message({type:"success",message:e.data.msg}),t.pageInfo()):t.$message({type:"error",message:e.data.msg}))}).catch(function(e){console.log(e),t.loading=!1,t.$message({type:"error",message:e.response.data})})}}}}});
//# sourceMappingURL=72.fb005fb942e4c10a8120.js.map