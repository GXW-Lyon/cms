webpackJsonp([71],{"0VKU":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"info_flow_content channelAccount",on:{click:e.bodyEvent}},[a("div",{staticClass:"menuNav"},[a("p",[a("i",{staticClass:"nav_index"}),e._l(e.menu_nav,function(t,i){return a("span",{key:i},[a("i",{staticClass:"el-icon-arrow-right"}),a("em",[e._v(e._s(t))])])})],2)]),e._v(" "),a("div",{staticClass:"finance_info"},[a("div",{staticClass:"f_i_date"},[a("span",{staticClass:"f_i_date_title"},[e._v("财务信息")]),e._v(" "),a("span",{staticClass:"demonstration"},[e._v("选择日期")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange",align:"right",placeholder:"选择日期范围",format:"yyyy / MM / dd","picker-options":e.$store.state.pickerOptions2},model:{value:e.financeDateValue,callback:function(t){e.financeDateValue=t},expression:"financeDateValue"}})],1),e._v(" "),a("div",{staticClass:"f_i_date f_i_info"},e._l(e.financeData,function(t,i){return a("p",{key:i,staticStyle:{display:"inline-block"}},[a("span",{staticClass:"f_i_date_title"},[e._v(e._s(t.ownerName))]),e._v(" "),a("span",{staticClass:"f_i_date_title f_i_info_long"},[a("i",{staticClass:"moneyIcon"}),a("span",{staticClass:"span_margin"},[e._v("应付："),a("em",[e._v(e._s(t.realtimeDataCost))]),e._v("元")]),a("span",[e._v("实付："),a("em",[e._v(e._s(t.customerCost))]),e._v("元")])])])}))]),e._v(" "),a("div",{staticClass:"info_ad_search"},[a("div",{staticClass:"info_a_s_content"},[a("div",{staticClass:"dateSelect"},[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[e._v("账目周期")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange",align:"right",placeholder:"选择日期范围",format:"yyyy / MM / dd","picker-options":e.$store.state.pickerOptions2},on:{change:e.dateChange},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}}),e._v(" "),a("el-select",{staticClass:"con_select unBorderRadius selectMaxWidth",attrs:{placeholder:e.channel_items.placeHolder,filterable:"",clearable:""},model:{value:e.channel_items.model_value,callback:function(t){e.$set(e.channel_items,"model_value",t)},expression:"channel_items.model_value"}},e._l(e.channel_items.options,function(e){return a("el-option",{key:e.channelCode,attrs:{label:e.name,value:e.channelCode}})})),e._v(" "),a("el-select",{staticClass:"con_select unBorderRadius selectMaxWidth",attrs:{clearable:"",filterable:"",placeholder:e.pay_items.placeHolder},model:{value:e.pay_items.model_value,callback:function(t){e.$set(e.pay_items,"model_value",t)},expression:"pay_items.model_value"}},e._l(e.$store.getters.cpaDingStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.val,value:e.id}})})),e._v(" "),a("el-button",{staticClass:"page_d_s_button",on:{click:e.pageInfo}},[e._v("查询")])],1)]),e._v(" "),a("div",{staticClass:"realTimeCitySearch",staticStyle:{"text-align":"left"}},[a("el-input",{staticClass:"page_d_select",attrs:{placeholder:"请输入对账单编号"},model:{value:e.billNo,callback:function(t){e.billNo=t},expression:"billNo"}}),e._v(" "),a("el-button",{staticClass:"page_d_s_button",on:{click:function(t){t.stopPropagation(),e.seeBill(e.billNo)}}},[e._v("搜索")])],1)])]),e._v(" "),a("div",{staticClass:"info_ad_table"},[a("div",{staticClass:"page_d_title"},[a("i",{staticStyle:{visibility:"hidden"}}),a("span"),e._v(" "),a("div",{staticClass:"tableVisibleMenu"},[a("p",{staticClass:"visibleMenuBut",on:{click:function(t){e.changeCheckStatus(t)}}}),e._v(" "),e.visibleMenuSelectStatus?a("div",{staticClass:"visibleMenuSelect",on:{click:function(t){e.preventDefault(t)}}},[a("el-checkbox-group",{attrs:{min:1},on:{change:e.checkedChange},model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"checkedCities"}},e._l(e.cities,function(t){return a("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])}))],1):e._e()])]),e._v(" "),a("div",{staticClass:"tableDetail"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""}},[e._l(e.table_column,function(t,i){return t.visible?a("el-table-column",{key:i,attrs:{fixed:t.fixed,sortable:t.sortable,prop:t.prop,label:t.label,formatter:t.format,width:t.width}}):e._e()}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"对账单",width:"100","min-width":"100","class-name":"exitBut"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{on:{click:function(a){a.stopPropagation(),e.seeBill(t.row.billNo)}}},[a("span",[e._v("查看")])])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100","min-width":"100","class-name":"exitBut"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{on:{click:function(a){a.stopPropagation(),e.deleteBill(t.row.id)}}},[a("span",[e._v("删除")])])]}}])})],2)],1)]),e._v(" "),a("div",{staticClass:"con_pager"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.page.currentPage,"page-sizes":e.page.sizes,"page-size":e.page.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.page.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.page,"currentPage",t)}}})],1)]),e._v(" "),e.billStatus?a("div",{staticClass:"bill",on:{click:function(e){e.stopPropagation()}}},[a("div",{staticClass:"bill_title"},[a("span",[e._v("对账单")]),e._v(" "),a("button",{on:{click:function(t){return t.stopPropagation(),e.exitBill(t)}}},[e._v("×")])]),e._v(" "),a("div",{staticClass:"memo"},[a("span",[e._v("客户主体：")]),e._v(e._s(e.params.owner)+"\n                    "),a("span",{staticClass:"r_span",staticStyle:{margin:"0",float:"right","font-weight":"bold"},on:{click:e.importData}},[e._v("下载对账单")])]),e._v(" "),a("div",{staticClass:"memo"},[a("span",[e._v("备注：")]),e._v(e._s(e.params.memo)+"\n                ")]),e._v(" "),a("div",{staticClass:"bill_table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableDataBill,border:"",stripe:""}},e._l(e.table_column_bill_title,function(t,i){return t.visible?a("el-table-column",{key:i,attrs:{fixed:t.fixed,sortable:t.sortable,prop:t.prop,label:t.label,width:""}}):e._e()}))],1),e._v(" "),a("div",{staticClass:"realTimeCitySearch"},[a("el-button",{staticClass:"page_d_s_button",staticStyle:{width:"100px!important"},on:{click:function(e){}}},[e._v("状态同步刷新")])],1),e._v(" "),a("div",{staticClass:"bill_table_detail"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命加载中",data:e.tableDataBillDetail,border:"",stripe:""}},e._l(e.table_column_bill_detail,function(t,i){return t.visible?a("el-table-column",{key:i,attrs:{fixed:t.fixed,sortable:t.sortable,prop:t.prop,label:t.label,width:""}}):e._e()}))],1)]):e._e()])])},l=[],s={render:i,staticRenderFns:l};t.a=s},"6lOp":function(e,t,a){"use strict";function i(e){a("OR+u")}Object.defineProperty(t,"__esModule",{value:!0});var l=a("bpab"),s=a("0VKU"),n=a("vSla"),o=i,c=n(l.a,s.a,!1,o,null,null);t.default=c.exports},AVBE:function(e,t,a){t=e.exports=a("UTlt")(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"channelAccount.vue",sourceRoot:""}])},"OR+u":function(e,t,a){var i=a("AVBE");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("FIqI")("59d10dbf",i,!0,{})},bpab:function(e,t,a){"use strict";var i=a("HzJ8"),l=a.n(i);t.a={data:function(){return{loading:!1,checked:!0,billStatus:!1,visibleMenuSelectStatus:!1,checkedCities:["渠道名称","账目周期","应付款项","实付款项","支付状态","备注"],cities:["对账日期","账目周期","渠道名称","应付款项","核减金额","实际结算金额","实付款项","支付状态","备注"],citiesFilterVal:["date","customerName","productName","productChannelCode","price","revenue","amount"],citiesFilter:["日期","客户名称","产品名称","上游渠道号","单价","收入金额（元）","结算量"],table_column:[{fixed:!1,prop:"createdDate",label:"对账日期",sortable:!0,visible:!1},{fixed:!1,prop:"city",label:"账目周期",sortable:!1,visible:!0,width:200,format:function(e,t){return e.startDate+"-"+e.endDate}},{fixed:!1,prop:"channelName",label:"渠道名称",sortable:!1,visible:!0},{fixed:!1,prop:"actualSettlementAmount",label:"实际结算金额",sortable:!1,visible:!1},{fixed:!1,prop:"actualPrice",label:"核减金额",sortable:!1,visible:!1},{fixed:!1,prop:"val_1",label:"应付款项",sortable:!1,visible:!0},{fixed:!1,prop:"val_2",label:"实付款项",sortable:!1,visible:!0},{fixed:!1,prop:"paymentStatus",label:"支付状态",sortable:!1,visible:!0},{fixed:!1,prop:"memo",label:"备注",sortable:!1,visible:!0,width:300}],table_column_bill_detail:[{fixed:!0,prop:"date",label:"日期",sortable:!0,visible:!0},{fixed:!1,prop:"customerName",label:"客户名称",sortable:!1,visible:!0},{fixed:!1,prop:"productName",label:"产品名称",sortable:!1,visible:!0},{fixed:!1,prop:"productChannelCode",label:"上游渠道号",sortable:!1,visible:!0},{fixed:!1,prop:"price",label:"单价",sortable:!1,visible:!0},{fixed:!1,prop:"revenue",label:"收入金额（元）",sortable:!1,visible:!0},{fixed:!1,prop:"amount",label:"结算量",sortable:!0,visible:!0}],table_column_bill_title:[{fixed:!1,prop:"billNo",label:"结算单号",sortable:!1,visible:!0},{fixed:!1,prop:"billDate",label:"结算单日期",sortable:!1,visible:!0},{fixed:!1,prop:"customerName",label:"客户名称",sortable:!1,visible:!0},{fixed:!1,prop:"startDate",label:"账目周期开始日期",sortable:!1,visible:!0},{fixed:!1,prop:"endDate",label:"账目周期结束日期",sortable:!1,visible:!0},{fixed:!1,prop:"actualCost",label:"结算金额（元）",sortable:!1,visible:!0},{fixed:!1,prop:"actualPrice",label:"核减金额",sortable:!1,visible:!0},{fixed:!1,prop:"actualSettlementAmount",label:"实际结算金额",sortable:!1,visible:!0}],page:{sizes:[10,20,30,50,100,500],offset:1,limit:10,count:0,currentPage:1,landpageName:""},menu_nav:["CPA数据管理","渠道结算"],channel_items:{model_value:"",placeHolder:"渠道简称",options:[]},pay_items:{model_value:"",placeHolder:"支付状态"},tableDataBill:[],tableDataBillDetail:[],tableData:[],billNo:"",dateValue:"",financeDateValue:"",financeData:[],params:{type:"1",val:"",startDate:"",endDate:"",memo:"",owner:""},isFirstEnter:!1}},activated:function(){this.$route.meta.isBack&&!this.isFirstEnter||(this.channelSelect(),this.financeInfo()),this.$route.meta.isBack=!1,this.isFirstEnter=!1},created:function(){this.isFirstEnter=!0},methods:{channelSelect:function(){var e=this;this.$http({method:"get",url:this.apiUrl.channelSearch,params:{offset:1,limit:9999,val:""}}).then(function(t){if(200==t.status){var a=t.data;e.channel_items.options=a.items}}).catch(function(e){console.log(e)})},financeInfo:function(){var e=this;this.$http({method:"get",url:this.apiUrl.financeInfoBill,params:{type:2}}).then(function(t){if(200==t.status){var a=t.data;e.financeData=[];var i=!0,s=!1,n=void 0;try{for(var o,c=l()(a.list);!(i=(o=c.next()).done);i=!0){var r=o.value;3==r.billType&&e.financeData.push(r)}}catch(e){s=!0,n=e}finally{try{!i&&c.return&&c.return()}finally{if(s)throw n}}}}).catch(function(e){console.log(e)})},pageInfo:function(){var e=this,t={page:this.page.offset,limit:this.page.limit,type:this.params.type,billDate:this.params.startDate+":"+this.params.endDate,channelCode:this.channel_items.model_value,paymentStatus:this.pay_items.model_value};""==this.channel_items.model_value&&delete t.channelCode,""==this.pay_items.model_value&&delete t.paymentStatus,this.$http({method:"get",url:this.apiUrl.channelBillList,params:t}).then(function(t){(t.status=200)&&(e.page.count=t.data.totalNums,e.tableData=t.data.itemList)}).catch(function(t){e.$message({type:"error",message:"请选择日期!"})})},seeCusBill:function(e){var t=this;this.loading=!0,this.$http({method:"get",url:this.apiUrl.billDetail,params:{no:e,type:2}}).then(function(e){if(t.loading=!1,200==e.status){var a=e.data;t.tableDataBill=[],t.params.memo=a.bill.memo,t.params.owner=a.bill.owner,t.tableDataBill.push(a.bill),a.statDatas.list.length>0&&a.statDatas.list.unshift({date:"汇总",amount:a.statDatas.summary.amount,revenue:a.statDatas.summary.revenue}),t.tableDataBillDetail=a.statDatas.list}}).catch(function(e){t.loading=!1,console.log(e)})},seeBill:function(e){this.seeCusBill(e),this.billStatus=!0},handleCurrentChange:function(e){this.page.offset=e,this.pageInfo()},handleSizeChange:function(e){this.page.limit=e,this.pageInfo()},checkedChange:function(){var e=!0,t=!1,a=void 0;try{for(var i,s=l()(this.table_column);!(e=(i=s.next()).done);e=!0){var n=i.value,o=this.checkedCities.indexOf(n.label);n.visible=o>=0}}catch(e){t=!0,a=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw a}}},changeCheckStatus:function(e){e.stopPropagation(),this.visibleMenuSelectStatus=!this.visibleMenuSelectStatus},exitBill:function(){this.billStatus=!1},bodyEvent:function(){this.visibleMenuSelectStatus=!1},preventDefault:function(e){e.stopPropagation()},seeEvent:function(){this.billStatus=!0},deleteBill:function(e){var t=this;this.$confirm("此操作将永久删除该账单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http({method:"delete",url:t.apiUrl.channelBillDel,params:{id:e}}).then(function(e){200==e.status?(t.$message({type:"success",message:"删除成功!"}),t.pageInfo()):t.$message({type:"error",message:"删除失败!"})}).catch(function(e){t.$message({type:"error",message:"删除失败!"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},dateChange:function(){this.params.startDate=this.formatDateTime(this.dateValue[0],"ymd"),this.params.endDate=this.formatDateTime(this.dateValue[1],"ymd")},importData:function(){if(0==this.tableDataBillDetail.length)return this.$message({type:"info",message:"请查询数据"}),!1;var e=this.citiesFilter,t=this.citiesFilterVal,a=this.tableDataBillDetail,i=[this.params.memo,"对账单"],l=i.join("_");this.handleDownload(e,t,a,l)}}}}});
//# sourceMappingURL=71.b697457747f805879d8e.js.map