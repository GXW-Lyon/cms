webpackJsonp([63],{"5/6n":function(e,t,a){var s=a("O3mD");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("FIqI")("01bd55a3",s,!0,{})},O3mD:function(e,t,a){t=e.exports=a("UTlt")(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"channelProMana.vue",sourceRoot:""}])},Spvv:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"info_flow_content",on:{click:e.bodyEvent}},[a("div",{staticClass:"menuNav"},[a("p",[a("i",{staticClass:"nav_index"}),e._l(e.menu_nav,function(t,s){return a("span",{key:s},[a("i",{staticClass:"el-icon-arrow-right"}),a("em",[e._v(e._s(t))])])})],2)]),e._v(" "),a("div",{staticClass:"info_ad_search"},[a("div",{staticClass:"info_a_s_content"},[a("div",{staticClass:"realTimeCitySearch"},[a("el-select",{staticClass:"con_select unBorderRadius",attrs:{placeholder:e.channel_items.placeHolder,filterable:""},on:{change:function(t){e.select("3",e.channel_items.model_value)}},model:{value:e.channel_items.model_value,callback:function(t){e.$set(e.channel_items,"model_value",t)},expression:"channel_items.model_value"}},e._l(e.channel_items.options,function(e){return a("el-option",{key:e.channelCode,attrs:{label:e.name,value:e.channelCode}})})),a("el-select",{staticClass:"con_select unBorderRadius",attrs:{placeholder:e.customer_items.placeHolder,filterable:""},on:{change:function(t){e.select("1",e.customer_items.model_value)}},model:{value:e.customer_items.model_value,callback:function(t){e.$set(e.customer_items,"model_value",t)},expression:"customer_items.model_value"}},e._l(e.customer_items.options,function(e){return a("el-option",{key:e.customerCode,attrs:{label:e.name,value:e.customerCode}})})),a("el-select",{staticClass:"con_select unBorderRadius",attrs:{placeholder:e.pro_items.placeHolder},on:{change:function(t){e.select("2",e.pro_items.model_value)}},model:{value:e.pro_items.model_value,callback:function(t){e.$set(e.pro_items,"model_value",t)},expression:"pro_items.model_value"}},e._l(e.pro_items.options,function(e){return a("el-option",{key:e.productCode,attrs:{label:e.productName,value:e.productCode}})})),a("el-select",{staticClass:"con_select unBorderRadius",attrs:{placeholder:e.channelPro_items.placeHolder,filterable:""},on:{change:function(t){e.select("4",e.channelPro_items.model_value)}},model:{value:e.channelPro_items.model_value,callback:function(t){e.$set(e.channelPro_items,"model_value",t)},expression:"channelPro_items.model_value"}},e._l(e.channelPro_items.options,function(e){return a("el-option",{key:e.customerProductCode,attrs:{label:e.productChannelCode,value:e.customerProductCode}})})),e._v(" "),a("div",{staticClass:"dateBut"},[a("el-upload",{staticClass:"upload-demo",attrs:{action:e.apiUrl.uploadChannelProduct,"with-credentials":!0,"on-success":e.handleSuccess,"on-progress":e.uploading,beforeUpload:e.beforeAvatarUpload,onError:e.uploadError,"show-file-list":!1,"file-list":e.fileList}},[a("el-button",{attrs:{type:"primary"}},[a("i",{staticClass:"el-icon-plus"}),e._v("导入数据")])],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.newPro}},[a("i",{staticClass:"el-icon-plus"}),e._v("新建产品")])],1)],1),e._v(" "),a("div",{staticClass:"dateSelect"},[a("div",{staticClass:"block"},[a("el-input",{staticClass:"page_d_select",attrs:{placeholder:"请输入上游渠道号"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.search()}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e._v(" "),a("el-button",{staticClass:"page_d_s_button",staticStyle:{"margin-left":"40px"},on:{click:function(t){e.search()}}},[e._v("搜索")])],1)])])]),e._v(" "),a("div",{staticClass:"info_ad_table"},[a("div",{staticClass:"page_d_title"},[a("i",{staticStyle:{visibility:"hidden"}}),a("span"),e._v(" "),a("div",{staticClass:"tableVisibleMenu"},[a("p",{staticClass:"visibleMenuBut",on:{click:function(t){e.changeCheckStatus(t)}}}),e._v(" "),e.visibleMenuSelectStatus?a("div",{staticClass:"visibleMenuSelect",on:{click:function(t){e.preventDefault(t)}}},[a("el-checkbox-group",{attrs:{min:1},on:{change:e.checkedChange},model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"checkedCities"}},e._l(e.cities,function(t){return a("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])}))],1):e._e()])]),e._v(" "),a("div",{staticClass:"tableDetail"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命上传中",data:e.tableData,border:"",stripe:""}},[e._l(e.table_column,function(t,s){return t.visible?a("el-table-column",{key:s,attrs:{fixed:t.fixed,sortable:t.sortable,prop:t.prop,label:t.label,formatter:t.format,width:t.width,"min-width":"100"}}):e._e()}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"","min-width":"100","class-name":"exitBut"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("span",{staticClass:"inlineBox d_span",on:{click:function(a){a.stopPropagation(),e.exitEvent(t.row.id)}}},[e._v("编辑")]),e._v(" "),a("span",{staticClass:"inlineBox d_span",on:{click:function(a){a.stopPropagation(),e.delpro(t.row.channelProductCode)}}},[e._v("删除")])])]}}])})],2)],1)]),e._v(" "),a("div",{staticClass:"con_pager"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.page.currentPage,"page-sizes":e.page.sizes,"page-size":e.page.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.page.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.page,"currentPage",t)}}})],1)]),e._v(" "),e.importTitleStatus?a("div",{staticClass:"importTitle",on:{click:function(e){e.stopPropagation()}}},[a("div",{staticClass:"importTitle_top"},[a("span",[e._v("提示")]),e._v(" "),a("button",{on:{click:function(t){return t.stopPropagation(),e.exitImportTitle(t)}}},[e._v("×")])]),e._v(" "),a("div",{staticClass:"importTitleTxt",domProps:{innerHTML:e._s(e.importTitleTxt)}})]):e._e()])])},i=[],n={render:s,staticRenderFns:i};t.a=n},V4Jj:function(e,t,a){"use strict";function s(e){a("5/6n")}Object.defineProperty(t,"__esModule",{value:!0});var i=a("fxRN"),n=a("Spvv"),o=a("vSla"),l=s,c=o(i.a,n.a,!1,l,null,null);t.default=c.exports},fxRN:function(e,t,a){"use strict";var s=a("HzJ8"),i=a.n(s);t.a={data:function(){return{visibleMenuSelectStatus:!1,checkedCities:["产品名称","上游渠道号","客户名称","渠道","上线时间","下线时间","包状态","现渠道价"],cities:["产品包渠道代码","产品名称","上游渠道号","康远渠道号","客户名称","渠道","上线时间","下线时间","包状态","现渠道价"],table_column:[{fixed:!0,prop:"channelProductCode",label:"产品包渠道代码",sortable:!0,visible:!1,width:140},{fixed:!1,prop:"customerName",label:"客户名称",sortable:!1,visible:!0},{fixed:!1,prop:"productName",label:"产品名称",sortable:!1,visible:!0,width:120},{fixed:!1,prop:"productChannelCode",label:"上游渠道号",sortable:!1,visible:!0,width:280},{fixed:!1,prop:"kyProductChannelCode",label:"康远渠道号",sortable:!1,visible:!1,width:150},{fixed:!1,prop:"channelName",label:"渠道",sortable:!1,visible:!0},{fixed:!1,prop:"status",label:"包状态",sortable:!1,visible:!0,format:function(e,t){switch(e.status){case 0:return"未封包";case 1:return"封包"}}},{fixed:!1,prop:"onlineTime",label:"上线时间",sortable:!1,visible:!0,format:function(e,t){return e.onlineTime.split(" ")[0]}},{fixed:!1,prop:"offlineTime",label:"下线时间",sortable:!1,visible:!0,format:function(e,t){return e.offlineTime.split(" ")[0]}},{fixed:!1,prop:"channelCurPrice",label:"现渠道价",sortable:!1,visible:!0}],page:{sizes:[10,20,30,50,100,500],offset:1,limit:10,count:0,currentPage:1},menu_nav:["CPA数据管理","渠道产品管理"],customer_items:{model_value:"",placeHolder:"客户",options:[]},pro_items:{model_value:"",placeHolder:"产品",options:[]},channel_items:{model_value:"",placeHolder:"渠道",options:[]},channelPro_items:{model_value:"",placeHolder:"上游渠道号",options:[]},params:{type:"",val:""},tableData:[],importTitleStatus:!1,importTitleTxt:"",fileList:[],loading:!1,value:"",isFirstEnter:!1}},activated:function(){this.$route.meta.isBack&&!this.isFirstEnter||this.channelInfo(),this.$route.meta.isBack=!1,this.isFirstEnter=!1,(""!==this.customer_items.model_value||""!==this.channel_items.model_value)&&this.pageInfo()},created:function(){this.isFirstEnter=!0},methods:{channelInfo:function(){var e=this;this.$http({method:"get",url:this.apiUrl.channelSearch,params:{offset:1,limit:9999,val:""}}).then(function(t){if(200==t.status){var a=t.data;a.items.length>0&&(e.channel_items.options=a.items)}}).catch(function(e){console.log(e)})},customerInfo:function(){var e=this;this.$http({method:"get",url:this.apiUrl.channelProListCustomer,params:{channelCode:this.channel_items.model_value}}).then(function(t){if(200==t.status){var a=t.data;e.customer_items.options=a.customerItems}}).catch(function(e){console.log(e)})},proInfo:function(){var e=this;this.$http({method:"get",url:this.apiUrl.channelProList,params:{customerCode:this.customer_items.model_value,channelCode:this.channel_items.model_value}}).then(function(t){if(200==t.status){var a=t.data;e.pro_items.options=a.items}}).catch(function(e){console.log(e)})},channelPro:function(){var e=this;this.$http({method:"get",url:this.apiUrl.channelProListPack,params:{productCode:this.pro_items.model_value,channelCode:this.channel_items.model_value}}).then(function(t){if(200==t.status){var a=t.data;e.channelPro_items.options=a.items}}).catch(function(e){console.log(e)})},search:function(){var e=this;this.value?this.$http({method:"get",url:this.apiUrl.channelProSearchByPackageCode,params:{code:this.value}}).then(function(t){if(200==t.status){var a=t.data;e.page.count=a.totalNums,e.tableData=a.items}}).catch(function(e){console.log(e)}):this.$message({type:"info",message:"请输入上游渠道号"})},pageInfo:function(){var e=this;this.$http({method:"get",url:this.apiUrl.channelProSearch,params:{offset:this.page.offset,limit:this.page.limit,type:3!=this.params.type?this.params.type:null,code:3!=this.params.type?this.params.val:null,channelCode:this.channel_items.model_value}}).then(function(t){if(200==t.status){var a=t.data;e.page.count=a.totalNums,e.tableData=a.items,""==e.pro_items.model_value&&(e.channelPro_items.options=[],e.channelPro_items.model_value="")}}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){this.page.offset=e,this.pageInfo()},handleSizeChange:function(e){this.page.limit=e,this.pageInfo()},checkedChange:function(){var e=!0,t=!1,a=void 0;try{for(var s,n=i()(this.table_column);!(e=(s=n.next()).done);e=!0){var o=s.value,l=this.checkedCities.indexOf(o.label);o.visible=l>=0}}catch(e){t=!0,a=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw a}}},changeCheckStatus:function(e){e.stopPropagation(),this.visibleMenuSelectStatus=!this.visibleMenuSelectStatus},newPro:function(){this.$router.push({path:"channelProNew",query:{channelProductId:""}})},bodyEvent:function(){this.visibleMenuSelectStatus=!1},preventDefault:function(e){e.stopPropagation()},exitEvent:function(e){this.$router.push({path:"channelProNew",query:{channelProductId:e}})},select:function(e,t){if(""!=t&&void 0!==t){switch(this.params.type=e,this.params.val=t,e){case"3":this.customer_items.model_value=this.pro_items.model_value=this.channelPro_items.model_value="",this.pro_items.options=this.channelPro_items.options=[],this.customerInfo();break;case"1":this.pro_items.model_value=this.channelPro_items.model_value="",this.channelPro_items.options=[],this.proInfo();break;case"2":this.channelPro_items.model_value="",this.channelPro()}this.pageInfo()}},deleteBill:function(e){var t=this;this.$confirm("此操作将永久删除该产品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http({method:"delete",url:t.apiUrl.channelProDel,params:{id:e}}).then(function(e){200==e.status?(t.$message({type:"success",message:"删除成功!"}),t.pageInfo()):t.$message({type:"error",message:"删除失败!"})}).catch(function(e){t.$message({type:"error",message:"删除失败!"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},clientSql:function(){""!==this.channelPro_items.model_value&&(this.page.count=1,this.tableData=[],this.tableData.push(this.channelPro_items.options[this.channelPro_items.model_value]))},exitImportTitle:function(){this.importTitleStatus=!1,this.pageInfo()},delpro:function(e){var t=this;this.$confirm("此操作将永久删除所选行, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http({method:"get",url:t.apiUrl.channelProDelNew,params:{channelProductCode:e}}).then(function(e){console.log(e),e.data&&1==e.data.status?(t.$message({type:"success",message:e.data.msg}),t.pageInfo()):t.$message({type:"error",message:e.data.msg})}).catch(function(e){t.$message({type:"error",message:"删除失败!"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}}}});
//# sourceMappingURL=63.765c63a857cdb23cf58d.js.map