webpackJsonp([35],{"9gkw":function(t,e,a){"use strict";var i=a("HzJ8"),l=a.n(i);e.a={data:function(){var t=this;return{loading:!1,billStatus:!1,examineStatus:!1,visibleMenuSelectStatus:!1,checkedCities:["客户名称","产品名称","预收余额","推广平台","我方主体"],cities:["客户名称","产品名称","预收余额","推广平台","我方主体"],citiesFilterVal:["custmoerName","productName","advanceBanlance","platformName","entityFormat"],table_column:[{fixed:!1,prop:"custmoerName",label:"客户名称",sortable:!1,visible:!0,minwidth:250},{fixed:!1,prop:"productName",label:"产品名称",sortable:!0,visible:!0,minwidth:100},{fixed:!1,prop:"advanceBanlance",label:"预收余额",sortable:!1,visible:!0,minwidth:100},{fixed:!1,prop:"platformName",label:"推广平台",sortable:!1,visible:!0,minwidth:100},{fixed:!1,prop:"entity",label:"我方主体",sortable:!1,visible:!0,minwidth:300,format:function(e,a){var i=!0,s=!1,o=void 0;try{for(var n,r=l()(t.kyhd.options);!(i=(n=r.next()).done);i=!0){var c=n.value;if(c.id==e.entity)return e.entityFormat=c.val,c.val}}catch(t){s=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(s)throw o}}return"-"}}],table_column_bill_detail:[{fixed:!1,prop:"date",label:"日期",sortable:!0,visible:!0},{fixed:!1,prop:"custmoerName",label:"客户",sortable:!1,visible:!0},{fixed:!1,prop:"productName",label:"产品",sortable:!1,visible:!0},{fixed:!1,prop:"advanceAmount",label:"预收",sortable:!1,visible:!0},{fixed:!1,prop:"entity",label:"我方主体",sortable:!1,visible:!0,format:function(e,a){var i=!0,s=!1,o=void 0;try{for(var n,r=l()(t.kyhd.options);!(i=(n=r.next()).done);i=!0){var c=n.value;if(c.id==e.entity)return e.entityFormat=c.val,c.val}}catch(t){s=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(s)throw o}}return"-"}},{fixed:!1,prop:"name",label:"发起人",sortable:!1,visible:!0},{fixed:!1,prop:"approvalStatus",label:"审批进度",sortable:!1,visible:!0},{fixed:!1,prop:"approvalDays",label:"该节点审批等待天数",sortable:!1,visible:!0}],detailCities:["日期","客户","产品","预收","我方主体","发起人","审批进度","该节点审批等待天数"],detailCitiesFilterVal:["date","custmoerName","productName","advanceAmount","entityFormat","name","approvalStatus","approvalDays"],menu_nav:["信息流数据管理","客户预收"],customer_items:{model_value:"",placeHolder:"客户",options:[]},pro_items:{placeHolder:"产品",options:[]},tableDataBillDetail:[],tableData:[],dateValue:"",params:{type:"2",val:"",startDate:"",endDate:""},page:{sizes:[10,20,50,100,200,500],offset:1,limit:10,count:0,currentPage:1},examine_from:{entity:"",customerId:"",productId:"",remark:"",advanceAmount:"",platformId:""},platform_items:{model_value:"",placeHolder:"平台",options:[]},kyhd:{model_value:"",placeHolder:"我方主体",options:[{id:"Y1",val:"深圳康远互动科技有限公司"},{id:"Y2",val:"霍尔果斯康远互动网络科技有限公司"},{id:"Y3",val:"上海贝玩网络科技有限公司"},{id:"Y4",val:"深圳自由泰格互动科技有限公司"}]},isFirstEnter:!1}},activated:function(){this.$route.meta.isBack&&!this.isFirstEnter||(this.customer(),this.platform()),this.$route.meta.isBack=!1,this.isFirstEnter=!1},created:function(){this.isFirstEnter=!0},methods:{customer:function(){var t=this;this.$http({method:"get",url:this.apiUrl.fdpCusGetCustomerList}).then(function(e){if(200==e.status){var a=e.data;t.customer_items.options=a}}).catch(function(t){console.log(t)})},platform:function(){var t=this;this.$http({method:"get",url:this.apiUrl.fdpPlaGetPlatformList}).then(function(e){if(200==e.status){var a=e.data;t.platform_items.options=a}}).catch(function(t){console.log(t)})},proInfo:function(){var t=this;this.examine_from.productId="",this.$http({method:"get",url:this.apiUrl.fdpProListall,params:{customerId:this.examine_from.customerId||-1}}).then(function(e){if(200==e.status){var a=e.data;t.pro_items.options=a}}).catch(function(t){console.log(t)})},pageInfo:function(){var t=this;if(""==this.customer_items.model_value)return this.$message({type:"info",message:"客户为必选项"}),!1;this.loading=!0,this.$http({method:"get",url:this.apiUrl.fdpCusSearch,params:{curPage:this.page.offset,limit:this.page.limit,customerId:this.customer_items.model_value,platformId:this.platform_items.model_value,entityCode:this.kyhd.model_value}}).then(function(e){t.loading=!1,(e.status=200)&&(t.page.count=e.data.totalNums,t.tableData=e.data.list)}).catch(function(e){t.loading=!1})},seeCusBill:function(t,e,a,i){var l=this;this.billStatus=!0,this.$http({method:"get",url:this.apiUrl.fdpCusDetailsquery,params:{customerId:t,productId:e,platformId:a,entityCode:i}}).then(function(t){200==t.status&&(l.tableDataBillDetail=t.data)}).catch(function(t){console.log(t)})},checkedChange:function(){var t=!0,e=!1,a=void 0;try{for(var i,s=l()(this.table_column);!(t=(i=s.next()).done);t=!0){var o=i.value,n=this.checkedCities.indexOf(o.label);o.visible=n>=0}}catch(t){e=!0,a=t}finally{try{!t&&s.return&&s.return()}finally{if(e)throw a}}},changeCheckStatus:function(t){t.stopPropagation(),this.visibleMenuSelectStatus=!this.visibleMenuSelectStatus},exit:function(){this.billStatus=this.examineStatus=!1},bodyEvent:function(){this.visibleMenuSelectStatus=this.billStatus=this.examineStatus=!1},preventDefault:function(t){t.stopPropagation()},seeEvent:function(){this.billStatus=!0},addExamine:function(){this.examineStatus=!0},onSubmit:function(){var t=this;for(var e in this.examine_from)if("remark"!=e&&""==this.examine_from[e])return this.$message({type:"info",message:"除备注信息，其他不能为空"}),!1;this.$http({method:"post",url:this.apiUrl.fdpCusCreate,data:this.examine_from}).then(function(e){var a=e.data;200==e.status?1==a.status?(t.$message({type:"success",message:"添加成功"}),t.examineStatus=!1,""!=t.customer_items.model_value&&t.pageInfo()):t.$message({type:"error",message:a.msg}):t.$message({type:"error",message:"添加失败"})}).catch(function(e){t.$message({type:"error",message:"添加失败"})})},importData:function(){if(0==this.tableData.length)return this.$message({type:"info",message:"请查询数据"}),!1;var t=this.cities,e=this.citiesFilterVal,a=this.tableData,i=[this.customer_items.model_value,this.platform_items.model_value,this.kyhd.model_value,"预收明细"].join("_");this.handleDownload(t,e,a,i)},billImport:function(){if(0==this.tableDataBillDetail.length)return this.$message({type:"info",message:"暂无数据"}),!1;var t=this.detailCities,e=this.detailCitiesFilterVal,a=this.tableDataBillDetail,i=[this.customer_items.model_value,"明细"].join("_");this.handleDownload(t,e,a,i)},handleCurrentChange:function(t){this.page.offset=t,this.pageInfo()},handleSizeChange:function(t){this.page.limit=t,this.pageInfo()}}}},AQ17:function(t,e,a){var i=a("UJDQ");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("FIqI")("6ca3640b",i,!0,{})},BqgT:function(t,e,a){"use strict";function i(t){a("AQ17")}Object.defineProperty(e,"__esModule",{value:!0});var l=a("9gkw"),s=a("PBeX"),o=a("vSla"),n=i,r=o(l.a,s.a,!1,n,null,null);e.default=r.exports},PBeX:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"info_flow_content customerCollect",on:{click:t.bodyEvent}},[a("div",{staticClass:"menuNav"},[a("p",[a("i",{staticClass:"nav_index"}),t._l(t.menu_nav,function(e,i){return a("span",{key:i},[a("i",{staticClass:"el-icon-arrow-right"}),a("em",[t._v(t._s(e))])])})],2)]),t._v(" "),a("div",{staticClass:"info_ad_search"},[a("div",{staticClass:"info_a_s_content",staticStyle:{padding:"27px 5%"}},[a("div",{staticClass:"dateSelect",staticStyle:{display:"inline-block",width:"50%"}},[a("div",{staticClass:"block"},[a("el-select",{staticClass:"con_select unBorderRadius selectMaxWidth",attrs:{clearable:"",placeholder:t.customer_items.placeHolder,filterable:""},model:{value:t.customer_items.model_value,callback:function(e){t.$set(t.customer_items,"model_value",e)},expression:"customer_items.model_value"}},t._l(t.customer_items.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.customerName,value:t.id}})})),t._v(" "),a("el-select",{staticClass:"con_select unBorderRadius selectMaxWidth",attrs:{clearable:"",placeholder:t.platform_items.placeHolder},model:{value:t.platform_items.model_value,callback:function(e){t.$set(t.platform_items,"model_value",e)},expression:"platform_items.model_value"}},t._l(t.platform_items.options,function(t){return a("el-option",{key:t.platformId,attrs:{label:t.platformName,value:t.platformId}})})),t._v(" "),a("el-select",{staticClass:"con_select unBorderRadius selectMaxWidth",attrs:{clearable:"",placeholder:t.kyhd.placeHolder},model:{value:t.kyhd.model_value,callback:function(e){t.$set(t.kyhd,"model_value",e)},expression:"kyhd.model_value"}},t._l(t.kyhd.options,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.val,value:t.id}})})),t._v(" "),a("el-button",{staticClass:"page_d_s_button",on:{click:t.pageInfo}},[t._v("查询")])],1)]),t._v(" "),a("div",{staticClass:"realTimeCitySearch dateBut",staticStyle:{display:"inline-block",width:"45%","text-align":"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.addExamine(e)}}},[a("i",{staticClass:"el-icon-plus"}),t._v("添加预收款\n                        ")]),t._v(" "),a("el-button",{staticClass:"page_d_s_button",on:{click:function(e){return e.stopPropagation(),t.importData(e)}}},[t._v("导出当前明细")])],1)])]),t._v(" "),a("div",{staticClass:"info_ad_table"},[a("div",{staticClass:"page_d_title"},[a("i",{staticStyle:{visibility:"hidden"}}),a("span"),t._v(" "),a("div",{staticClass:"tableVisibleMenu"},[a("p",{staticClass:"visibleMenuBut",on:{click:function(e){t.changeCheckStatus(e)}}}),t._v(" "),t.visibleMenuSelectStatus?a("div",{staticClass:"visibleMenuSelect",on:{click:function(e){t.preventDefault(e)}}},[a("el-checkbox-group",{attrs:{min:1},on:{change:t.checkedChange},model:{value:t.checkedCities,callback:function(e){t.checkedCities=e},expression:"checkedCities"}},t._l(t.cities,function(e){return a("el-checkbox",{key:e,attrs:{label:e}},[t._v(t._s(e))])}))],1):t._e()])]),t._v(" "),a("div",{staticClass:"tableDetail"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命加载中",data:t.tableData,border:"",stripe:""}},[t._l(t.table_column,function(e,i){return e.visible?a("el-table-column",{key:i,attrs:{fixed:e.fixed,sortable:e.sortable,formatter:e.format,prop:e.prop,label:e.label,width:"auto","min-width":e.minwidth}}):t._e()}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"查看明细",width:"80","min-width":"80","class-name":"exitBut"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{on:{click:function(a){a.stopPropagation(),t.seeCusBill(e.row.customerId,e.row.productId,e.row.platformId,e.row.entityCode)}}},[a("i",{staticClass:"el-icon-view"})])]}}])})],2)],1)]),t._v(" "),t.billStatus?a("div",{staticClass:"bill",on:{click:function(t){t.stopPropagation()}}},[a("div",{staticClass:"bill_title"},[a("span",{on:{click:t.billImport}},[t._v("导出")]),t._v(" "),a("button",{on:{click:function(e){return e.stopPropagation(),t.exit(e)}}},[t._v("×")])]),t._v(" "),a("div",{staticClass:"bill_table_detail"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableDataBillDetail,border:"",stripe:""}},t._l(t.table_column_bill_detail,function(e,i){return e.visible?a("el-table-column",{key:i,attrs:{fixed:e.fixed,sortable:e.sortable,formatter:e.format,prop:e.prop,label:e.label,width:""}}):t._e()}))],1)]):t._e(),t._v(" "),t.examineStatus?a("div",{staticClass:"examine",on:{click:function(t){t.stopPropagation()}}},[a("div",{staticClass:"examine_title"},[a("span",[t._v("发起预收款审批")]),t._v(" "),a("button",{on:{click:function(e){return e.stopPropagation(),t.exit(e)}}},[t._v("×")])]),t._v(" "),a("el-form",{ref:"form",attrs:{model:t.examine_from,"label-width":"125px"}},[a("el-form-item",{attrs:{label:"客户名称："}},[a("el-select",{staticClass:"f_input1 unBorderRadius",attrs:{clearable:"",filterable:"",placeholder:t.customer_items.placeHolder},on:{change:t.proInfo},model:{value:t.examine_from.customerId,callback:function(e){t.$set(t.examine_from,"customerId",e)},expression:"examine_from.customerId"}},t._l(t.customer_items.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.customerName,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"产品名称："}},[a("el-select",{staticClass:"f_input1 unBorderRadius",attrs:{clearable:"",filterable:"",placeholder:t.pro_items.placeHolder},model:{value:t.examine_from.productId,callback:function(e){t.$set(t.examine_from,"productId",e)},expression:"examine_from.productId"}},t._l(t.pro_items.options,function(t){return a("el-option",{key:t.productId,attrs:{label:t.productName,value:t.productId}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"预收金额："}},[a("el-input",{staticClass:"f_input1",model:{value:t.examine_from.advanceAmount,callback:function(e){t.$set(t.examine_from,"advanceAmount",e)},expression:"examine_from.advanceAmount"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"我方主体："}},[a("el-select",{staticClass:"f_input1 inlineBlock",attrs:{placeholder:t.kyhd.placeHolder},on:{change:function(t){}},model:{value:t.examine_from.entity,callback:function(e){t.$set(t.examine_from,"entity",e)},expression:"examine_from.entity"}},t._l(t.kyhd.options,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.val,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"投放平台："}},[a("el-select",{staticClass:"f_input1 inlineBlock",attrs:{placeholder:t.platform_items.placeHolder},on:{change:function(t){}},model:{value:t.examine_from.platformId,callback:function(e){t.$set(t.examine_from,"platformId",e)},expression:"examine_from.platformId"}},t._l(t.platform_items.options,function(t){return a("el-option",{key:t.platformId,attrs:{label:t.platformName,value:t.platformId}})}))],1),t._v(" "),a("el-form-item",{staticStyle:{height:"auto!important"},attrs:{label:"备注"}},[a("el-input",{staticClass:"f_textarea",attrs:{type:"textarea"},model:{value:t.examine_from.remark,callback:function(e){t.$set(t.examine_from,"remark",e)},expression:"examine_from.remark"}})],1),t._v(" "),a("el-form-item",{staticClass:"form_button",staticStyle:{"margin-top":"20px"}},[a("el-button",{attrs:{type:"primary page_d_s_button"},on:{click:t.onSubmit}},[t._v("确认")]),t._v(" "),a("el-button",{staticClass:"page_d_s_button",on:{click:t.exit}},[t._v("取消")])],1)],1)],1):t._e(),t._v(" "),a("div",{staticClass:"con_pager"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.page.currentPage,"page-sizes":t.page.sizes,"page-size":t.page.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.page.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.page,"currentPage",e)}}})],1)])])])},l=[],s={render:i,staticRenderFns:l};e.a=s},UJDQ:function(t,e,a){e=t.exports=a("UTlt")(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"customerCollect.vue",sourceRoot:""}])}});
//# sourceMappingURL=35.7f947bfb018c43d91755.js.map